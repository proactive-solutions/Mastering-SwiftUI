<!DOCTYPE HTML>
<html lang="zh-tw" >
    
    <head>
        
        <meta charset=utf-8"UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=11; IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
        <title>SwiftUI 按钮与渐层 | 精通 SwiftUI - iOS 16 版</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.0.1">
        <meta name="author" content="Simon Ng">
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    <link rel="next" href="./swiftui-state.html" />
    
    
    <link rel="prev" href="./swiftui-scrollview.html" />
    

        
    </head>
    <body>
        
        
    <link rel="stylesheet" href="gitbook/style.css">
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-image-captions/image-captions.css">
        
    
    
        <link rel="stylesheet" href="././styles/website.css">
    

        
    <div class="book" data-level="6" data-basepath="." data-revision="Thu Dec 01 2022 17:36:55 GMT+0800 (HKT)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="输入并搜寻" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
            
            <li>
                <a href="https://www.appcoda.com.tw" target="blank" class="custom-link">Made by AppCoda</a>
            </li>
        
            
            <li>
                <a href="https://www.appcoda.com.tw/contact" target="blank" class="custom-link">Contact us / Support</a>
            </li>
        
            
            <li>
                <a href="http://twitter.com/share?text=Mastering%20SwiftUI%20via%20@appcodamobile&amp;url=https://www.appcoda.com.tw/swiftui/&amp;hashtags=swiftlang" target="blank" class="custom-link">Tweet this book</a>
            </li>
        
        

        
        <li class="divider"></li>
        

        
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                        <i class="fa fa-check"></i>
                        
                        序言
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="swiftui-basics.html">
            
                
                    <a href="./swiftui-basics.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        SwiftUI 介绍
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="swiftui-text.html">
            
                
                    <a href="./swiftui-text.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        SwiftUI 入门 - 文字的处理
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="swiftui-images.html">
            
                
                    <a href="./swiftui-images.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        图片的处理
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="swiftui-stacks.html">
            
                
                    <a href="./swiftui-stacks.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        以堆叠布局使用者介面
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5" data-path="swiftui-scrollview.html">
            
                
                    <a href="./swiftui-scrollview.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        ScrollView 与 Carousel UI 的建立
                    </a>
                
            
            
        </li>
    
        <li class="chapter active" data-level="6" data-path="swiftui-buttons.html">
            
                
                    <a href="./swiftui-buttons.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        SwiftUI 按钮与渐层
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="swiftui-state.html">
            
                
                    <a href="./swiftui-state.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        状态(State)与绑定(Binding)
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="swiftui-path-shape.html">
            
                
                    <a href="./swiftui-path-shape.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        实现路径(Path)与形状(Shape)来画线与圆饼图
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="9" data-path="swiftui-animation.html">
            
                
                    <a href="./swiftui-animation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        基础动画与转场
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="10" data-path="swiftui-list.html">
            
                
                    <a href="./swiftui-list.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        动态列表、 ForEach 与 Identifiable 的使用方法
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="11" data-path="swiftui-navigation.html">
            
                
                    <a href="./swiftui-navigation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                        导航UI与导航列客制化运用
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="12" data-path="swiftui-modal.html">
            
                
                    <a href="./swiftui-modal.html">
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                        强制回应视图、浮动按钮与提示的实现
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="13" data-path="swiftui-form.html">
            
                
                    <a href="./swiftui-form.html">
                        <i class="fa fa-check"></i>
                        
                            <b>13.</b>
                        
                        以选取器(Picker)、开关(Toggle)与步进器(Stepper)来建立一个表单
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="14" data-path="swiftui-form-data.html">
            
                
                    <a href="./swiftui-form-data.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.</b>
                        
                        使用 Combine 与 Environment 物件进行数据分享
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="15" data-path="swiftui-form-registration.html">
            
                
                    <a href="./swiftui-form-registration.html">
                        <i class="fa fa-check"></i>
                        
                            <b>15.</b>
                        
                        以 Combine 与 视图模型建立一个注册表单
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="16" data-path="swiftui-actionsheet-context.html">
            
                
                    <a href="./swiftui-actionsheet-context.html">
                        <i class="fa fa-check"></i>
                        
                            <b>16.</b>
                        
                        滑动删除、内容选单与动作列表
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="17" data-path="swiftui-gestures.html">
            
                
                    <a href="./swiftui-gestures.html">
                        <i class="fa fa-check"></i>
                        
                            <b>17.</b>
                        
                        认识手势（Gestures）
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="18" data-path="swiftui-bottom-sheet.html">
            
                
                    <a href="./swiftui-bottom-sheet.html">
                        <i class="fa fa-check"></i>
                        
                            <b>18.</b>
                        
                        以SwiftUI 手势与 GeometryReader 建立一个底部展开式页面
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="19" data-path="swiftui-trip-tinder.html">
            
                
                    <a href="./swiftui-trip-tinder.html">
                        <i class="fa fa-check"></i>
                        
                            <b>19.</b>
                        
                        使用手势与动画建立 Tinder 风格的 UI
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="20" data-path="swiftui-advanced-animations.html">
            
                
                    <a href="./swiftui-advanced-animations.html">
                        <i class="fa fa-check"></i>
                        
                            <b>20.</b>
                        
                        建立像 Apple Wallet App 的动画和转场效果
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="21" data-path="swiftui-json.html">
            
                
                    <a href="./swiftui-json.html">
                        <i class="fa fa-check"></i>
                        
                            <b>21.</b>
                        
                        JSON、滑杆的运用与数据过滤
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="22" data-path="swiftui-core-data.html">
            
                
                    <a href="./swiftui-core-data.html">
                        <i class="fa fa-check"></i>
                        
                            <b>22.</b>
                        
                        如何使用 Core Data 建立 ToDo App
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="23" data-path="swiftui-uikit.html">
            
                
                    <a href="./swiftui-uikit.html">
                        <i class="fa fa-check"></i>
                        
                            <b>23.</b>
                        
                        利用 UIViewRepresentable 整合UIKit 组件
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="24" data-path="swiftui-searchbar.html">
            
                
                    <a href="./swiftui-searchbar.html">
                        <i class="fa fa-check"></i>
                        
                            <b>24.</b>
                        
                        建立搜寻栏视图并使用自订绑定（Custom Binding）
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="25" data-path="swiftui-real-world-app.html">
            
                
                    <a href="./swiftui-real-world-app.html">
                        <i class="fa fa-check"></i>
                        
                            <b>25.</b>
                        
                        把所学应用出来！构建个人理财App
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="26" data-path="swiftui-appstoreanimation.html">
            
                
                    <a href="./swiftui-appstoreanimation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>26.</b>
                        
                        创建类似App Store使用的动画视图转换
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="27" data-path="swiftui-carousel.html">
            
                
                    <a href="./swiftui-carousel.html">
                        <i class="fa fa-check"></i>
                        
                            <b>27.</b>
                        
                        如何建立图像轮播（Image Carousel）
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="28" data-path="swiftui-expandable-list.html">
            
                
                    <a href="./swiftui-expandable-list.html">
                        <i class="fa fa-check"></i>
                        
                            <b>28.</b>
                        
                        如何建立展开式列表视图和大纲视图
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="29" data-path="swiftui-gridlayout.html">
            
                
                    <a href="./swiftui-gridlayout.html">
                        <i class="fa fa-check"></i>
                        
                            <b>29.</b>
                        
                        使用 LazyVGrid 和 LazyHGrid 构建集合视图
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="30" data-path="swiftui-progress-ring.html">
            
                
                    <a href="./swiftui-progress-ring.html">
                        <i class="fa fa-check"></i>
                        
                            <b>30.</b>
                        
                        使用 Shape 和 Animatable 开发带动画的环形进度条
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="31" data-path="swiftui-library.html">
            
                
                    <a href="./swiftui-library.html">
                        <i class="fa fa-check"></i>
                        
                            <b>31.</b>
                        
                        如何使用 AnimatableModifier 和 LibraryContentProvider
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="32" data-path="swiftui-texteditor.html">
            
                
                    <a href="./swiftui-texteditor.html">
                        <i class="fa fa-check"></i>
                        
                            <b>32.</b>
                        
                        使用 TextEditor 支持多行文字输入
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="33" data-path="swiftui-matchedgeometry.html">
            
                
                    <a href="./swiftui-matchedgeometry.html">
                        <i class="fa fa-check"></i>
                        
                            <b>33.</b>
                        
                        使用 matchedGeometryEffect为 App 建立绚丽的视图动画
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="34" data-path="swiftui-grid-animation.html">
            
                
                    <a href="./swiftui-grid-animation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>34.</b>
                        
                        ScrollViewReader 和网格动画
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="35" data-path="swiftui-tabview.html">
            
                
                    <a href="./swiftui-tabview.html">
                        <i class="fa fa-check"></i>
                        
                            <b>35.</b>
                        
                        标签视图的运用与自订标签列
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="36" data-path="swiftui-asyncimage.html">
            
                
                    <a href="./swiftui-asyncimage.html">
                        <i class="fa fa-check"></i>
                        
                            <b>36.</b>
                        
                        利用 AsyncImage 非同步加载和显示图像
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="37" data-path="swiftui-searchable.html">
            
                
                    <a href="./swiftui-searchable.html">
                        <i class="fa fa-check"></i>
                        
                            <b>37.</b>
                        
                        利用 Searchable 建立搜寻栏
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="38" data-path="swiftui-charts.html">
            
                
                    <a href="./swiftui-charts.html">
                        <i class="fa fa-check"></i>
                        
                            <b>38.</b>
                        
                        利用 Charts 框架建立图表
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="39" data-path="swiftui-live-text.html">
            
                
                    <a href="./swiftui-live-text.html">
                        <i class="fa fa-check"></i>
                        
                            <b>39.</b>
                        
                        利用 Live Text API 从图片中撷取文本
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="40" data-path="swiftui-sharelink.html">
            
                
                    <a href="./swiftui-sharelink.html">
                        <i class="fa fa-check"></i>
                        
                            <b>40.</b>
                        
                        通过 ShareLink 来分享文本和图像等数据
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="41" data-path="swiftui-imagerenderer.html">
            
                
                    <a href="./swiftui-imagerenderer.html">
                        <i class="fa fa-check"></i>
                        
                            <b>41.</b>
                        
                        利用 ImageRenderer API 轻松把 SwiftUI 视图转换为图像
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="42" data-path="swiftui-pdf-doc.html">
            
                
                    <a href="./swiftui-pdf-doc.html">
                        <i class="fa fa-check"></i>
                        
                            <b>42.</b>
                        
                        如何把 SwiftUI 视图转换为 PDF 文件
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="43" data-path="swiftui-gauge.html">
            
                
                    <a href="./swiftui-gauge.html">
                        <i class="fa fa-check"></i>
                        
                            <b>43.</b>
                        
                        使用 Gauge 视图显示进度并创建速度计
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="44" data-path="swiftui-grid.html">
            
                
                    <a href="./swiftui-grid.html">
                        <i class="fa fa-check"></i>
                        
                            <b>44.</b>
                        
                        使用Grid API 创建网格布局
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="45" data-path="swiftui-anylayout.html">
            
                
                    <a href="./swiftui-anylayout.html">
                        <i class="fa fa-check"></i>
                        
                            <b>45.</b>
                        
                        利用 AnyLayout 切换 UI 布局
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="46" data-path="swiftui-navigationstack.html">
            
                
                    <a href="./swiftui-navigationstack.html">
                        <i class="fa fa-check"></i>
                        
                            <b>46.</b>
                        
                        使用新的 NavigationStack 视图构建数据导向的导航
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                本书使用 GitBook 释出
            </a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="目录"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="搜寻"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="字型设定"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">衬线体</button>
        <button type="button" data-font="1" class="button">无衬线体</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">白色</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">棕褐色</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">夜间</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="分享"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    分享到 Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    分享到 Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    分享到 Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    分享到 Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    分享到 Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >精通 SwiftUI - iOS 16 版</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="%E7%AC%AC-6-%E7%AB%A0-br-%E4%BD%BF%E7%94%A8-swiftui-%E6%8C%89%E9%88%95%E3%80%81%E6%A8%99%E7%B1%A4%E8%88%87%E6%BC%B8%E5%B1%A4">第 6 章<br>使用 SwiftUI 按钮、标签与渐层</h1>
<blockquote>
<p>按钮可启动App 的特定动作，其有自订背景，并可加入一个标题或一个图示。这个系统为大部分的使用情况提供许多预定义的按钮样式。你也可以充分设计自订按钮。</p>
<p>- Apple 的官方文件 (<a href="https://developer.apple.com/design/human-interface-guidelines/ios/controls/buttons/" target="_blank">https://developer.apple.com/design/human-interface-guidelines/ios/controls/buttons/</a>)</p>
</blockquote>
<p>我想应该不需要去解释什么是按钮，它是一个非常基本的 UI 控制组件，你可以在所有的 App 中看到它，按钮可处理使用者的触控动作，并触发特定的动作。倘若你之前有学过 iOS 程序设计的话，SwiftUI 的 Button 与 UIKit 的UIButton 非常相似，但更具弹性与可客制化，待会你将会了解我的意思。在本章中，我将详细介绍 SwiftUI 控制组件，你将学到下列的技巧： </p>
<ol>
<li>如何建立一个简单的按钮，并处理使用者的选择。</li>
<li>如何自订按钮的背景、间距与字型。</li>
<li>如何在按钮上加入边框。</li>
<li>如何建立包含图片和文字的按钮。</li>
<li>如何建立具有渐层背景与阴影的按钮。</li>
<li>如何建立一个全宽度（full-width）的按钮。</li>
<li>如何建立一个可重复使用的按钮样式。</li>
<li>如何加入一个点击按钮动画。</li>
</ol>
<h3 id="%E5%95%9F%E7%94%A8-swiftui-%E4%BE%86%E5%BB%BA%E7%AB%8B%E6%96%B0%E5%B0%88%E6%A1%88">启用 SwiftUI 来建立新项目</h3>
<p>好的，让我们从基础开始，使用 SwiftUI 来建立一个简单的按钮。首先开启Xcode， 并使用“App”模板建立一个新项目。接着于下一个画面输入项目的名称，我将它设定为“SwiftUIButton”，不过你可以自由使用其他的名称。你只需确保于 Interface 选项下已选取“ SwiftUI”即可，如图 6.1 所示。</p>
<figure id="fig6.1"><img src="images/buttons/swiftui-buttons-1.png" alt="图 6.1. 建立一个新项目"><figcaption>图 6.1. 建立一个新项目</figcaption></figure>
<p>当你储存项目后，Xcode 应会载入 <code>ContentView.swift</code> 档，并在设计划布中显示一个预览画面，如图 6.2 所示。</p>
<figure id="fig6.2"><img src="images/buttons/swiftui-buttons-2.png" alt="图 6.2　预览默认的内容视图"><figcaption>图 6.2　预览默认的内容视图</figcaption></figure>
<p>使用 SwiftUI 建立按钮非常简单。基本上，你可以使用下列的代码片段来建立按钮： </p>
<pre><code class="lang-swift"><span class="hljs-type">Button</span> {
    <span class="hljs-comment">// 所需执行的内容</span>
} label: {
    <span class="hljs-comment">// 按钮的外观设定</span>
}
</code></pre>
<p>建立按钮时，你需要提供这两个代码区块： </p>
<ol>
<li><strong>所需执行的内容</strong> - 使用者点击或选择按钮后执行的代码。</li>
<li><strong>按钮的外观设定</strong> - 描述外观的代码区块。</li>
</ol>
<p>举例而言，如果你只想要将“Hello World”标签变成一个按钮，则可以将代码更新如下： </p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentView</span>: <span class="hljs-title">View</span> </span>{
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">Button</span> {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Hello World tapped!&quot;</span>)
        } label: {
            <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Hello World&quot;</span>)
        }
    }
}
</code></pre>
<p>另外，其实你也可以将代码写成这样：</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentView</span>: <span class="hljs-title">View</span> </span>{
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">Button</span>(action: {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Hello World tapped!&quot;</span>)
        }) label: {
            <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Hello World&quot;</span>)
        }
    }
}
</code></pre>
<p>两段代码的作用完全相同，这只是编码风格的问题。 在此书中，我们会使用第一种方法。</p>
<p>现在，你可以在画布中看到“Hello World”文字变成可点击的按钮，如图 6.3 所示。</p>
<figure id="fig6.3"><img src="images/buttons/swiftui-buttons-3.png" alt="图 6.3.　建立一个简单的按钮"><figcaption>图 6.3.　建立一个简单的按钮</figcaption></figure>
<p><code>print</code> 语句会将讯息输出到控制台（Console）。要对其测试的话，请点选“Play”按钮来执行这个 App。如此当你点击按钮时，你将在主控台中看到该讯息，如图 6.4 所示。如果你无法见到主控台，至 Xcode 选单，并选取 View &gt; Debug Area &gt; Activate Console 。</p>
<figure id="fig6.4"><img src="images/buttons/swiftui-buttons-4.png" alt="图 6.4.　主控台讯息"><figcaption>图 6.4.　主控台讯息</figcaption></figure>
<h3 id="%E8%87%AA%E8%A8%82%E6%8C%89%E9%88%95%E7%9A%84%E5%AD%97%E5%9E%8B%E8%88%87%E8%83%8C%E6%99%AF">自订按钮的字型与背景</h3>
<p>现在，你应该知道如何建立一个简单的按钮，我们来了解如何使用内建的修饰器来自订其外观。举例而言，要改变背景与文字颜色，你可以使用 <code>background</code> 与 <code>foreground Color</code> 修饰器，如下所示：</p>
<pre><code class="lang-swift"><span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Hello World&quot;</span>)
    .background(<span class="hljs-type">Color</span>.purple)
    .foregroundColor(.white)
</code></pre>
<p>如果你要变更字型，则可进一步使用 <code>font</code> 修饰器，并指定字型样式（例如：<code>.title</code> ）： </p>
<pre><code class="lang-swift"><span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Hello World&quot;</span>)
    .background(<span class="hljs-type">Color</span>.purple)
    .foregroundColor(.white)
    .font(.title)
</code></pre>
<p>变更完成后，你的按钮应该看起来如图 6.5 所示。</p>
<figure id="fig6.5"><img src="images/buttons/swiftui-buttons-5.png" alt="图 6.5　自订按钮的背景色与前景色"><figcaption>图 6.5　自订按钮的背景色与前景色</figcaption></figure>
<p>如你所见，这个按钮看起来不怎么好看，如果能在文字周围加入一些间距不是会更好吗？为此，你可以使用padding 修饰器，如下所示： </p>
<pre><code class="lang-swift"><span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Hello World&quot;</span>)
    .padding()
    .background(<span class="hljs-type">Color</span>.purple)
    .foregroundColor(.white)
    .font(.title)
</code></pre>
<p>变更完成后，画布会据此更新按钮。现在按钮看起来好看多了，如图 6.6 所示。</p>
<figure id="fig6.6"><img src="images/buttons/swiftui-buttons-6.png" alt="图 6.6　在按钮加入间距"><figcaption>图 6.6　在按钮加入间距</figcaption></figure>
<h4 id="%E4%BF%AE%E9%A3%BE%E5%99%A8%E9%A0%86%E5%BA%8F%E7%9A%84%E9%87%8D%E8%A6%81%E6%80%A7">修饰器顺序的重要性</h4>
<p>这里要强调的一件事，即“padding 修饰器要放置于 background 之后”。如果你将代码撰写如下，则最终结果将会完全不同。</p>
<figure id="fig6.7"><img src="images/buttons/swiftui-buttons-7.png" alt="图 6.7　将 padding 修饰器放置于 background 修饰器之后"><figcaption>图 6.7　将 padding 修饰器放置于 background 修饰器之后</figcaption></figure>
<p>如果你将 <code>padding</code> 修饰器放置于 <code>background</code> 修饰器之后，你依然可以加入一些间距至按钮中，但是间距没有套用所选的背景色。如果你想知道原因，则可如下解读这些修饰器： </p>
<pre><code class="lang-swift"><span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Hello World&quot;</span>)
    .background(<span class="hljs-type">Color</span>.purple) <span class="hljs-comment">// 1. 将背景色更改为紫色</span>
    .foregroundColor(.white)  <span class="hljs-comment">// 2. 将前景色 / 字型颜色设定为白色</span>
    .font(.title)             <span class="hljs-comment">// 3. 变更字型样式</span>
    .padding()                <span class="hljs-comment">// 4. 使用主色来加入间距（ 即白色）</span>
</code></pre>
<p>反之，如果 <code>padding</code> 修饰器放置于 <code>background</code> 修饰器之前，则修饰器会像这样工作： </p>
<pre><code class="lang-swift"><span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Hello World&quot;</span>)
    .padding()                <span class="hljs-comment">// 1. 加入间距    </span>
    .background(<span class="hljs-type">Color</span>.purple) <span class="hljs-comment">// 2. 将背景色更改为紫色（ 包含间距）</span>
    .foregroundColor(.white)  <span class="hljs-comment">// 3. 将前景色/ 字型颜色设定为白色</span>
    .font(.title)             <span class="hljs-comment">// 4. 变更字型样式</span>
</code></pre>
<h3 id="%E6%8C%89%E9%88%95%E5%8A%A0%E4%B8%8A%E9%82%8A%E6%A1%86">按钮加上边框</h3>
<p><code>padding</code> 修饰器并非一定要始终放在最前面，而是取决于你的按钮设计，例如：你要建立一个具有图 6.8 所示的边框的按钮。</p>
<figure id="fig6.8"><img src="images/buttons/swiftui-buttons-8.png" alt="图 6.8.　具有边框的按钮"><figcaption>图 6.8.　具有边框的按钮</figcaption></figure>
<p>你可以如下更改 <code>Text</code> 控制组件的代码：</p>
<pre><code class="lang-swift"><span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Hello World&quot;</span>)
    .foregroundColor(.purple)
    .font(.title)
    .padding()
    .border(<span class="hljs-type">Color</span>.purple, width: <span class="hljs-number">5</span>)
</code></pre>
<p>这里我们设定前景色为“紫色”，然后在文字周围加入一些空白的间距。<code>border</code> 修饰器是用来定义边框的宽度与颜色，请自行更改 <code>width</code> 参数的值来查看效果。</p>
<p>再举一个例子，例如：一位设计师向你展示如图 6.9 所示的按钮设计，你将如何利用目前所学的内容来实现它呢？在阅读到下一个段落之前，请自行花个几分钟来思考解决方案。</p>
<figure id="fig6.9"><img src="images/buttons/swiftui-buttons-9.png" alt="图 6.9　具有背景色及边框的按钮"><figcaption>图 6.9　具有背景色及边框的按钮</figcaption></figure>
<p>那么，你所需要的代码如下：</p>
<pre><code class="lang-swift"><span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Hello World&quot;</span>)
    .fontWeight(.bold)
    .font(.title)
    .padding()
    .background(<span class="hljs-type">Color</span>.purple)
    .foregroundColor(.white)
    .padding(<span class="hljs-number">10</span>)
    .border(<span class="hljs-type">Color</span>.purple, width: <span class="hljs-number">5</span>)
</code></pre>
<p>我们使用两个 <code>padding</code> 修饰器来设计按钮。第一个 <code>padding</code> 与 <code>background</code> 修饰器一起建立了具有间距及紫色背景的按钮，<code>padding(10)</code> 修饰器在按钮周围加入了额外的间距，而 <code>border</code> 修饰器则指定以紫色绘制边框。</p>
<p>我们来看一个更复杂的示例。如果你想要设计如图 6.10 所示、具有圆角外框的按钮， 该如何做呢？ </p>
<figure id="fig6.10"><img src="images/buttons/swiftui-buttons-10.png" alt="图 6.10.　具有圆角边框的按钮"><figcaption>图 6.10.　具有圆角边框的按钮</figcaption></figure>
<p>SwiftUI 内建了一个名为 <code>cornerRadius</code> 修饰器，可以让你轻松建立圆角。要渲染圆角按钮的背景，你只需使用这个修饰器并指定圆角即可，如下所示： </p>
<pre><code class="lang-swift">.cornerRadius(<span class="hljs-number">40</span>)
</code></pre>
<p>要做出圆角边框，需要多花一点工夫，因为这个 <code>border</code> 修饰器无法让你建立圆角。因此，我们需要绘制边框并将其叠在按钮上。以下为最终的代码： </p>
<pre><code class="lang-swift"><span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Hello World&quot;</span>)
    .fontWeight(.bold)
    .font(.title)
    .padding()
    .background(.purple)
    .cornerRadius(<span class="hljs-number">40</span>)
    .foregroundColor(.white)
    .padding(<span class="hljs-number">10</span>)
    .overlay {
        <span class="hljs-type">RoundedRectangle</span>(cornerRadius: <span class="hljs-number">40</span>)
            .stroke(.purple, lineWidth: <span class="hljs-number">5</span>)
    }
</code></pre>
<p><code>overlay</code> 修饰器可以让你将另一个视图叠在目前的视图之上。在代码中，我们使用 <code>RoundedRectangle</code> 物件的<code>stroke</code>  修饰器来绘制一个圆角边框，而 <code>stroke</code> 修饰器可以让你设定框线的颜色与线宽。</p>
<h3 id="%E5%BB%BA%E7%AB%8B%E5%85%B7%E6%9C%89%E5%9C%96%E7%89%87%E8%88%87%E6%96%87%E5%AD%97%E7%9A%84%E6%8C%89%E9%88%95">建立具有图片与文字的按钮</h3>
<p>到目前为止，我们只使用了文字按钮。在真实世界的项目中，你或你的设计师可能想要显示具有图片的按钮，而建立图片按钮的语法是相同的，除了你是使用 <code>Image</code> 控制组件来代替 <code>Text</code> 控制组件，如下所示：</p>
<pre><code class="lang-swift"><span class="hljs-type">Button</span>(action: {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Delete button tapped!&quot;</span>)
}) {
    <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;trash&quot;</span>)
        .font(.largeTitle)
        .foregroundColor(.red)
}
</code></pre>
<p>为了方便起见，我们使用 SF Symbols 内建图示库（即垃圾桶图示）来建立图片按钮。我们在 <code>font</code> 修饰器中指定使用 <code>.largeTitle</code>，以使图片大一点。你的按钮看起来应如图 6.11 所示。</p>
<figure id="fig6.11"><img src="images/buttons/swiftui-buttons-11.png" alt="图 6.11　图片按钮"><figcaption>图 6.11　图片按钮</figcaption></figure>
<p>同样的，如果你想要建立一个具有纯背景色的圆形图片按，则可以应用我们之前讨论过的修饰器图 6.12 显示了一个示例。</p>
<figure id="fig6.12"><img src="images/buttons/swiftui-buttons-12.png" alt="图 6.12　圆形图片按钮"><figcaption>图 6.12　圆形图片按钮</figcaption></figure>
<p>你可以同时使用文字与图片来建立一个按钮。例如：你想要将“Delete”文字放在图示旁边，则可将代码替换如下： </p>
<pre><code class="lang-swift"><span class="hljs-type">Button</span> {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Delete button tapped&quot;</span>)
} label: {
    <span class="hljs-type">HStack</span> {
        <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;trash&quot;</span>)
            .font(.title)
        <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Delete&quot;</span>)
            .fontWeight(.semibold)
            .font(.title)
    }
    .padding()
    .foregroundColor(.white)
    .background(<span class="hljs-type">Color</span>.red)
    .cornerRadius(<span class="hljs-number">40</span>)
}
</code></pre>
<p>这里，我们将图片与文字控制组件皆嵌入在一个水平堆叠中，这将使垃圾桶图示与“Delete”文字并排。在<code>HStack</code> 中，修饰器设定了背景色、间距与按钮的圆角，图 6.13 显示了最后结果的按钮。</p>
<figure id="fig6.13"><img src="images/buttons/swiftui-buttons-13.png" alt="图 6.13.　具有图示与文字的按钮"><figcaption>图 6.13.　具有图示与文字的按钮</figcaption></figure>
<h3 id="%E6%A8%99%E7%B1%A4%E7%9A%84%E7%94%A8%E6%B3%95">标签的用法</h3>
<p>SwiftUI 于 iOS 14 导入了一个新的视图称作 <code>Label</code>，可以将图片与文字并排，因此，你可以使用 <code>Label</code>  来替代 <code>HStack</code> 来实现同样的布局。</p>
<pre><code class="lang-swift"><span class="hljs-type">Button</span> {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Delete button tapped&quot;</span>)
} label: {
    <span class="hljs-type">Label</span>(
        title: {
            <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Delete&quot;</span>)
                .fontWeight(.semibold)
                .font(.title)
        },
        icon: {
            <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;trash&quot;</span>)
                .font(.title)
        }
    )
    .padding()
    .foregroundColor(.white)
    .background(.red)
    .cornerRadius(<span class="hljs-number">40</span>)
}
</code></pre>
<h3 id="%E5%BB%BA%E7%AB%8B%E5%85%B7%E6%9C%89%E6%BC%B8%E5%B1%A4%E8%83%8C%E6%99%AF%E8%88%87%E9%99%B0%E5%BD%B1%E7%9A%84%E6%8C%89%E9%88%95">建立具有渐层背景与阴影的按钮</h3>
<p>使用 SwiftUI，你便可轻松以渐层背景设计按钮。你不仅可在 <code>background</code> 修饰器设定特定颜色，还可轻松为任何按钮设定渐层效果，你只需将下列这行代码：</p>
<pre><code class="lang-swift">.background(.red)
</code></pre>
<p>替代为： </p>
<pre><code class="lang-swift">.background(<span class="hljs-type">LinearGradient</span>(gradient: <span class="hljs-type">Gradient</span>(colors: [<span class="hljs-type">Color</span>.red, <span class="hljs-type">Color</span>.blue]), startPoint: .leading, endPoint: .trailing))
</code></pre>
<p>SwiftUI 框架有几个内建的渐层效果，上列的代码从左（ <code>.leading</code> ）至右（ <code>.trailing</code> ）应用了线性渐层，其从左侧的红色开始，至右侧的蓝色结束，如图 6.14 所示。</p>
<figure id="fig6.14"><img src="images/buttons/swiftui-buttons-14.png" alt="图 6.14.　渐层背景的按钮"><figcaption>图 6.14.　渐层背景的按钮</figcaption></figure>
<p>如果你想要由上而下应用渐层效果，则可以将代码更改如下： </p>
<pre><code class="lang-swift">.background(<span class="hljs-type">LinearGradient</span>(gradient: <span class="hljs-type">Gradient</span>(colors: [<span class="hljs-type">Color</span>.red, <span class="hljs-type">Color</span>.blue]), startPoint: .top, endPoint: .bottom))
</code></pre>
<p>你可以自由使用自己喜好的颜色来渲染渐层效果。例如：你的设计师告诉你使用了如图 6.15 所示的渐层。</p>
<figure id="fig6.15"><img src="images/buttons/swiftui-buttons-15.png" alt="图 6.15.　uigradients.com 的渐层示例"><figcaption>图 6.15.　uigradients.com 的渐层示例</figcaption></figure>
<p>有多种方式可以将色码（ color code ）从十六进制（ hex ）转换为Swift 相容的格式。这里我将展示其中一种方式。在项目导航器中，选取素材目录（也就是 <code>Assets</code> ），然后在空白区域（ AppIcon 下方）按右键，并选择“New Color Set”，如图 6.16 所示。</p>
<figure id="fig6.16"><img src="images/buttons/swiftui-buttons-16.png" alt="图 6.16.　在素材目录定义一个新颜色集"><figcaption>图 6.16.　在素材目录定义一个新颜色集</figcaption></figure>
<p>接下来， 于 “Any Appearance”选择好颜色并点选“Show inspector”按钮， 然后点选属性检阅器（Attributes Inspector ）图示来显示颜色集的属性。在“Name”栏位中，将名称设定为“DarkGreen”，接着在“Color”区块中，更改“Input Method”（输入方法）栏位为“8-bit Hexadecimal”，如图 6.17 所示。</p>
<figure id="fig6.17"><img src="images/buttons/swiftui-buttons-17.png" alt="图 6.17　编辑颜色集的属性"><figcaption>图 6.17　编辑颜色集的属性</figcaption></figure>
<p>现在，你可以在“Hex”栏位设定色码。对于此示例，输入 <code>#11998e</code>来定义颜色并将颜色集命名为“LightGreen”。重复上述步骤，输入<code>#38ef7d</code>来定义另一个颜色集，你可以将颜色集命名为“DarkGreen”， 如图 6.18 所示。</p>
<figure id="fig6.18"><img src="images/buttons/swiftui-buttons-18.png" alt="图 6.18.　定义两个颜色集"><figcaption>图 6.18.　定义两个颜色集</figcaption></figure>
<p>现在你已经定义了两个颜色集，我们回到 <code>ContentView.swift</code> 并更新色码。要使用颜色集，你只需使指定颜色集的名称，如下所示： </p>
<pre><code class="lang-swift"><span class="hljs-type">Color</span>(<span class="hljs-string">&quot;DarkGreen&quot;</span>)
<span class="hljs-type">Color</span>(<span class="hljs-string">&quot;LightGreen&quot;</span>)
</code></pre>
<p>因此， 要使用“DarkGreen”与“LightGreen”颜色集来渲染渐层， 你只需要更新 <code>background</code> 修饰器，如下所示： </p>
<pre><code class="lang-swift">.background(<span class="hljs-type">LinearGradient</span>(gradient: <span class="hljs-type">Gradient</span>(colors: [<span class="hljs-type">Color</span>(<span class="hljs-string">&quot;DarkGreen&quot;</span>), <span class="hljs-type">Color</span>(<span class="hljs-string">&quot;LightGreen&quot;</span>)]), startPoint: .leading, endPoint: .trailing))
</code></pre>
<p>若是你已正确修改的话，则你的按钮应该有很棒的渐层背景，如图 6.19 所示。</p>
<figure id="fig6.19"><img src="images/buttons/swiftui-buttons-19.png" alt="图 6.19.　使用自己喜爱的颜色来产生渐层"><figcaption>图 6.19.　使用自己喜爱的颜色来产生渐层</figcaption></figure>
<p>在本小节中，我要介绍另一个修饰器。<code>shadow</code> 修饰器可以让你在按钮（或任何视图） 周围绘制阴影，只需在<code>cornerRadius</code> 修饰器之后加入下列这行代码，即可看到结果： </p>
<pre><code class="lang-swift">.shadow(radius: <span class="hljs-number">5.0</span>)
</code></pre>
<p>此外，你可以控制阴影的颜色、半径与位置。以下为示例代码： </p>
<pre><code class="lang-swift">.shadow(color: .gray, radius: <span class="hljs-number">20.0</span>, x: <span class="hljs-number">20</span>, y: <span class="hljs-number">10</span>)
</code></pre>
<h3 id="%E5%BB%BA%E7%AB%8B%E5%85%A8%E5%AF%AC%E5%BA%A6%E6%8C%89%E9%88%95">建立全宽度按钮</h3>
<p>大一点的按钮通常可以吸引使用者的注意。有时，你可能需要建立一个占满荧幕宽度的全宽度按钮。<code>frame</code> 修饰器是设计用来让你控制视图的尺寸，不论你是想要建立一个固定大小的按钮，还是可变化宽度的按钮，都可以使用这个修饰器。要建立全宽度按钮，你可以变更 <code>Button</code> 代码，如下所示： </p>
<pre><code class="lang-swift"><span class="hljs-type">Button</span>(action: {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Delete tapped!&quot;</span>)
}) {
    <span class="hljs-type">HStack</span> {
        <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;trash&quot;</span>)
            .font(.title)
        <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Delete&quot;</span>)
            .fontWeight(.semibold)
            .font(.title)
    }
    .frame(minWidth: <span class="hljs-number">0</span>, maxWidth: .infinity)
    .padding()
    .foregroundColor(.white)
    .background(<span class="hljs-type">LinearGradient</span>(gradient: <span class="hljs-type">Gradient</span>(colors: [<span class="hljs-type">Color</span>(<span class="hljs-string">&quot;DarkGreen&quot;</span>), <span class="hljs-type">Color</span>(<span class="hljs-string">&quot;LightGreen&quot;</span>)]), startPoint: .leading, endPoint: .trailing))
    .cornerRadius(<span class="hljs-number">40</span>)
}
</code></pre>
<p>该代码与我们刚才编写代码非常相似，除了在 <code>padding</code> 之前加入 <code>frame</code> 修饰器。这里我们为按钮定义了弹性宽度，并设定 <code>maxWidth</code> 参数为 <code>.infinity</code>，这表示该按钮将填满容器视图的宽度。在画布中，它现在应该显示了一个全宽度按钮，如图 6.20 所示。</p>
<figure id="fig6.20"><img src="images/buttons/swiftui-buttons-20.png" alt="图 6.20.　全宽度按钮"><figcaption>图 6.20.　全宽度按钮</figcaption></figure>
<p>通过将 <code>maxWidth</code> 定义为 <code>.infinity</code>，按钮宽度将根据装置的荧幕宽度来自动调整。若是你想要给此按钮更多的水平空间的话，则在 <code>.cornerRadius(40)</code> 后插入一个 <code>padding</code> 修饰器： </p>
<pre><code class="lang-swift">.padding(.horizontal, <span class="hljs-number">20</span>)
</code></pre>
<h3 id="%E4%BD%BF%E7%94%A8-buttonstyle-%E8%A8%AD%E8%A8%88%E6%8C%89%E9%88%95">使用 ButtonStyle 设计按钮</h3>
<p>在真实世界的 App 中，相同的按钮设计将运用于多个按钮上，例如：你建立了Delete、Edit 与 Share 等三个按钮，都具有相同的按钮样式，如图 6.21 所示。</p>
<figure id="fig6.21"><img src="images/buttons/swiftui-buttons-21.png" alt="图 6.21.　全宽度按钮"><figcaption>图 6.21.　全宽度按钮</figcaption></figure>
<p>你可能撰写下列的代码： </p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentView</span>: <span class="hljs-title">View</span> </span>{
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">VStack</span> {
            <span class="hljs-type">Button</span> {
                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Share button tapped&quot;</span>)
            } label: {
                <span class="hljs-type">Label</span>(
                    title: {
                        <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Share&quot;</span>)
                            .fontWeight(.semibold)
                            .font(.title)
                    },
                    icon: {
                        <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;square.and.arrow.up&quot;</span>)
                            .font(.title)
                    }
                )
                .frame(minWidth: <span class="hljs-number">0</span>, maxWidth: .infinity)
                .padding()
                .foregroundColor(.white)
                .background(<span class="hljs-type">LinearGradient</span>(gradient: <span class="hljs-type">Gradient</span>(colors: [<span class="hljs-type">Color</span>(<span class="hljs-string">&quot;DarkGreen&quot;</span>), <span class="hljs-type">Color</span>(<span class="hljs-string">&quot;LightGreen&quot;</span>)]), startPoint: .leading, endPoint: .trailing))
                .cornerRadius(<span class="hljs-number">40</span>)
                .padding(.horizontal, <span class="hljs-number">20</span>)
            }

            <span class="hljs-type">Button</span> {
                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Edit button tapped&quot;</span>)
            } label: {
                <span class="hljs-type">Label</span>(
                    title: {
                        <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Edit&quot;</span>)
                            .fontWeight(.semibold)
                            .font(.title)
                    },
                    icon: {
                        <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;square.and.pencil&quot;</span>)
                            .font(.title)
                    }
                )
                .frame(minWidth: <span class="hljs-number">0</span>, maxWidth: .infinity)
                .padding()
                .foregroundColor(.white)
                .background(<span class="hljs-type">LinearGradient</span>(gradient: <span class="hljs-type">Gradient</span>(colors: [<span class="hljs-type">Color</span>(<span class="hljs-string">&quot;DarkGreen&quot;</span>), <span class="hljs-type">Color</span>(<span class="hljs-string">&quot;LightGreen&quot;</span>)]), startPoint: .leading, endPoint: .trailing))
                .cornerRadius(<span class="hljs-number">40</span>)
                .padding(.horizontal, <span class="hljs-number">20</span>)
            }

            <span class="hljs-type">Button</span> {
                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Delete button tapped&quot;</span>)
            } label: {
                <span class="hljs-type">Label</span>(
                    title: {
                        <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Delete&quot;</span>)
                            .fontWeight(.semibold)
                            .font(.title)
                    },
                    icon: {
                        <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;trash&quot;</span>)
                            .font(.title)
                    }
                )
                .frame(minWidth: <span class="hljs-number">0</span>, maxWidth: .infinity)
                .padding()
                .foregroundColor(.white)
                .background(<span class="hljs-type">LinearGradient</span>(gradient: <span class="hljs-type">Gradient</span>(colors: [<span class="hljs-type">Color</span>(<span class="hljs-string">&quot;DarkGreen&quot;</span>), <span class="hljs-type">Color</span>(<span class="hljs-string">&quot;LightGreen&quot;</span>)]), startPoint: .leading, endPoint: .trailing))
                .cornerRadius(<span class="hljs-number">40</span>)
                .padding(.horizontal, <span class="hljs-number">20</span>)
            }
        }

    }
}
</code></pre>
<p>从上列的代码中可以见到，你需要为每个按钮复制所有的修饰器。当你或你的设计师想要修改按钮样式时，你将需要修改所有的修饰器，这会是一个非常繁锁的工作，并非是程序设计的最佳实践，那么你如何归纳样式并重复使用呢？</p>
<p>SwiftUI 提供了一个名为 <code>ButtonStyle</code>的协议，可以让你建立自己的按钮样式。要为我们的按钮建立一个可以重复使用的样式， 则我们建立一个名为 <code>Gradient BackgroundStyle</code> 的新结构，该结构遵循 ButtonStyle 协议。在 <code>struct ContentPreview_Previews</code>上方，插入下列这段代码： </p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">GradientBackgroundStyle</span>: <span class="hljs-title">ButtonStyle</span> </span>{

    <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">makeBody</span><span class="hljs-params">(configuration: <span class="hljs-keyword">Self</span>.Configuration)</span> -&gt; <span class="hljs-title">some</span> <span class="hljs-title">View</span> </span>{
        configuration.label
            .frame(minWidth: <span class="hljs-number">0</span>, maxWidth: .infinity)
            .padding()
            .foregroundColor(.white)
            .background(<span class="hljs-type">LinearGradient</span>(gradient: <span class="hljs-type">Gradient</span>(colors: [<span class="hljs-type">Color</span>(<span class="hljs-string">&quot;DarkGreen&quot;</span>), <span class="hljs-type">Color</span>(<span class="hljs-string">&quot;LightGreen&quot;</span>)]), startPoint: .leading, endPoint: .trailing))
            .cornerRadius(<span class="hljs-number">40</span>)
            .padding(.horizontal, <span class="hljs-number">20</span>)
    }
}
</code></pre>
<p>该协议要求我们提供接受 <code>configuration</code> 参数的 <code>makeBody</code> 函数的实现，configuration 参数包含一个 <code>label</code> 属性，你可以应用修饰器来变更按钮的样式。在上列的代码中，我们只应用了之前所使用的同一个修饰器。</p>
<p>因此，你如何将自订样式应用于按钮上呢？ SwiftUI 提供了一个名为 <code>.buttonStyle</code>的修饰器，让你可以应用按钮样式，如下所示： </p>
<pre><code class="lang-swift"><span class="hljs-type">Button</span> {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Delete button tapped&quot;</span>)
} label: {
    <span class="hljs-type">Label</span>(
        title: {
            <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Delete&quot;</span>)
                .fontWeight(.semibold)
                .font(.title)
        },
        icon: {
            <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;trash&quot;</span>)
                .font(.title)
        }
    )
}
.buttonStyle(<span class="hljs-type">GradientBackgroundStyle</span>())
</code></pre>
<p>很酷，是吧？代码现在已经被简化了，你只要一行代码，即可轻松应用按钮样式于任何按钮上。</p>
<figure id="fig6.22"><img src="images/buttons/swiftui-buttons-22.png" alt="图 6.22. 使用.buttonStyle 修饰器来应用自订样式"><figcaption>图 6.22. 使用.buttonStyle 修饰器来应用自订样式</figcaption></figure>
<p>你也可以通过 configuration 的 <code>isPressed 属性</code>，来判断按钮是否有被按下，这可以让你在使用者按下它时改变按钮的样式。举例而言，我们想要制作一个当使用者按下去时会变小一点的按钮，你可以加入一行程序，如图 6.23 所示。</p>
<figure id="fig6.23"><img src="images/buttons/swiftui-buttons-23.png" alt="图 6.23.　使用 .buttonStyle 修饰器来自订样式"><figcaption>图 6.23.　使用 .buttonStyle 修饰器来自订样式</figcaption></figure>
<p><code>scaleEffect</code> 修饰器可以让你缩放按钮（或任何视图）。当要放大按钮时，则要传送大于 1.0 的值，而小于1.0 的值，会让按钮变小。</p>
<pre><code class="lang-swift">.scaleEffect(configuration.isPressed ? <span class="hljs-number">0.9</span> : <span class="hljs-number">1.0</span>)
</code></pre>
<p>因此，这行代码的作用是，当按下按钮时会缩小按钮（即 <code>0.9</code>），而当使用者放开手指后，会缩放回原来的大小（即 <code>1.0</code>）。如果你已执行这个App，则在按钮缩放时，你应该会看到一个不错的动画效果，这是 SwiftUI 的强大之处，你不需要额外撰写代码，它已经内建了动画特效。</p>
<h3 id="%E4%BD%9C%E6%A5%AD">作业</h3>
<p>作业内容是建立一个具有＋图示的动画按钮，可以出现 + 图示。当使用者按下按钮时，这个＋图示将旋转（顺时针/ 逆时针）成一个 &#xD7; 图示，如图 6.24 所示。</p>
<figure id="fig6.24"><img src="images/buttons/swiftui-buttons-24.png" alt="图 6.24.　使用者按下时旋转图示"><figcaption>图 6.24.　使用者按下时旋转图示</figcaption></figure>
<p>提示一下，<code>rotationEffect</code> 修饰器可以用来旋转按钮（或者其他视图）。</p>
<h3 id="%E5%9C%A8-ios-15-%E4%B8%AD%E8%A8%AD%E7%BD%AE%E6%8C%89%E9%88%95%E6%A8%A3%E5%BC%8F">在 iOS 15 中设置按钮样式</h3>
<figure id="fig6.25"><img src="images/buttons/swiftui-buttons-25.png" alt="图 6.25. 圆角按钮"><figcaption>图 6.25. 圆角按钮</figcaption></figure>
<p>相信你已经知道如何实现如图 25 所示的按钮。在 iOS 15 中，Apple 为 <code>Button</code> 视图引入了许多修饰符。 要建立类似按钮，你可以编写如下代码：</p>
<pre><code class="lang-swift"><span class="hljs-type">Button</span> {

} label: {
    <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Buy me a coffee&quot;</span>)
}
.tint(.purple)
.buttonStyle(.borderedProminent)
.buttonBorderShape(.roundedRectangle(radius: <span class="hljs-number">5</span>))
.controlSize(.large)
</code></pre>
<p><code>tint</code> 修饰器指定按钮的颜色。 通过应用<code>.borderedProminent</code> 样式，iOS 将按钮呈现为紫色背景并以白色显示文字。 <code>.buttonBorderShape</code> 修饰器可让你设置按钮的边框形状。 在这里，我们将它设置为 <code>.roundedRectangle</code> 使按钮变圆角。</p>
<p><code>.controlSize</code> 允许你更改按钮的大小。 默认大小为 <code>.regular</code>。 其他有效值包括 <code>.large</code>、<code>.small</code> 和 <code>.mini</code> 。 下图显示了按钮在不同尺寸下的外观。</p>
<figure id="fig6.26"><img src="images/buttons/swiftui-buttons-26.png" alt="图 6.26. 不同控件大小的按钮"><figcaption>图 6.26. 不同控件大小的按钮</figcaption></figure>
<p>除了使用<code>.roundedRectangle</code>，SwiftUI 还提供了另一种名为<code>.capsule</code>的边框形状，供开发者创建胶囊形状按钮。</p>
<figure id="fig6.27"><img src="images/buttons/swiftui-buttons-27.png" alt="图 6.27. 使用胶囊形状"><figcaption>图 6.27. 使用胶囊形状</figcaption></figure>
<p>你还可以使用 <code>.automatic</code> 选项让系统自动调整按钮的形状。到目前为止，我们使用<code>.borderProminent</code> 按钮样式。 新版 SwiftUI 还提供了其他内置样式，包括 <code>.bordered</code>、<code>.borderless</code> 和 <code>.plain</code>。 <code>.bordered</code> 样式是经常会使用的样式。 下图显示了一个使用 <code>.bordered</code> 样式的示例按钮。</p>
<figure id="fig6.28"><img src="images/buttons/swiftui-buttons-28.png" alt="图 6.28. 使用边框样式"><figcaption>图 6.28. 使用边框样式</figcaption></figure>
<h3 id="%E5%B0%87%E6%A8%A3%E5%BC%8F%E6%87%89%E7%94%A8%E5%88%B0%E5%A4%9A%E5%80%8B%E6%8C%89%E9%88%95">将样式应用到多个按钮</h3>
<p>使用按钮样式，你可以轻松地将相同的样式应用于一组按钮。 下面是一个例子：</p>
<pre><code class="lang-swift"><span class="hljs-type">VStack</span> {
    <span class="hljs-type">Button</span>(action: {}) {
        <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Add to Cart&quot;</span>)
            .font(.headline)
    }

    <span class="hljs-type">Button</span>(action: {}) {
        <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Discover&quot;</span>)
            .font(.headline)
            .frame(maxWidth: <span class="hljs-number">300</span>)
    }

    <span class="hljs-type">Button</span>(action: {}) {
        <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Check out&quot;</span>)
            .font(.headline)
    }
}
.tint(.purple)
.buttonStyle(.bordered)
.controlSize(.large)
</code></pre>
<h3 id="%E4%BD%BF%E7%94%A8%E6%8C%89%E9%88%95%E8%A7%92%E8%89%B2">使用按钮角色</h3>
<p>自 iOS 15 版本开始，SwiftUI 框架为<code>Button</code>引入了一个新的<code>role</code>选项。 此选项描述按钮的语义角色。 根据指定的角色，iOS 会自动为按钮呈现适当的外观。</p>
<p>例如，如下所示将角色定义为 <code>.destructive</code> ：</p>
<pre><code class="lang-swift"><span class="hljs-type">Button</span>(<span class="hljs-string">&quot;Delete&quot;</span>, role: .de<span class="hljs-class"><span class="hljs-keyword">struct</span><span class="hljs-title">ive</span>) </span>{
    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Delete&quot;</span>)
}
.buttonStyle(.borderedProminent)
.controlSize(.large)
</code></pre>
<p>iOS 会自动以红色显示<em>删除</em> 按钮。 图 29 显示了不同角色和样式的按钮外观。</p>
<figure id="fig6.29"><img src="images/buttons/swiftui-buttons-29.png" alt="图 6.29. 不同角色和样式的按钮外观"><figcaption>图 6.29. 不同角色和样式的按钮外观</figcaption></figure>
<h3 id="%E6%9C%AC%E7%AB%A0%E5%B0%8F%E7%B5%90">本章小结</h3>
<p>在本章中，我们介绍了 SwiftUI 中建立按钮的基本观念。按钮在手机介面（或确切地说在任何应用程序 UI）中扮演着关键角色，良好设计的按钮不仅可以使你的 UI 更具吸引力，还可以提升你的 App 的使用者体验。如你所学，通过结合 SF Symbols、渐层与动画的应用，你可以轻松建立一个有吸引力且实用的按钮。</p>
<p>在本章所准备的示例档中，有完整的项目可以下载： </p>
<ul>
<li>示例项目 (<a href="https://www.appcoda.com/resources/swiftui4/SwiftUIButton.zip" target="_blank">https://www.appcoda.com/resources/swiftui4/SwiftUIButton.zip</a>)</li>
</ul>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./swiftui-scrollview.html" class="navigation navigation-prev " aria-label="Previous page: ScrollView 与 Carousel UI 的建立"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./swiftui-state.html" class="navigation navigation-next " aria-label="Next page: 状态(State)与绑定(Binding)"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":"white","family":"serif","size":3},"image-captions":{"caption":"_CAPTION_","variable_name":"_pictures"}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
