<!DOCTYPE HTML>
<html lang="zh-tw" >
    
    <head>
        
        <meta charset=utf-8"UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=11; IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
        <title>SwiftUI 介绍 | 精通 SwiftUI - iOS 16 版</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.0.1">
        <meta name="author" content="Simon Ng">
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    <link rel="next" href="./swiftui-text.html" />
    
    
    <link rel="prev" href="./index.html" />
    

        
    </head>
    <body>
        
        
    <link rel="stylesheet" href="gitbook/style.css">
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-image-captions/image-captions.css">
        
    
    
        <link rel="stylesheet" href="././styles/website.css">
    

        
    <div class="book" data-level="1" data-basepath="." data-revision="Thu Dec 01 2022 17:36:55 GMT+0800 (HKT)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="输入并搜寻" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
            
            <li>
                <a href="https://www.appcoda.com.tw" target="blank" class="custom-link">Made by AppCoda</a>
            </li>
        
            
            <li>
                <a href="https://www.appcoda.com.tw/contact" target="blank" class="custom-link">Contact us / Support</a>
            </li>
        
            
            <li>
                <a href="http://twitter.com/share?text=Mastering%20SwiftUI%20via%20@appcodamobile&amp;url=https://www.appcoda.com.tw/swiftui/&amp;hashtags=swiftlang" target="blank" class="custom-link">Tweet this book</a>
            </li>
        
        

        
        <li class="divider"></li>
        

        
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                        <i class="fa fa-check"></i>
                        
                        序言
                    </a>
                
            
            
        </li>
    
        <li class="chapter active" data-level="1" data-path="swiftui-basics.html">
            
                
                    <a href="./swiftui-basics.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        SwiftUI 介绍
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="swiftui-text.html">
            
                
                    <a href="./swiftui-text.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        SwiftUI 入门 - 文字的处理
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="swiftui-images.html">
            
                
                    <a href="./swiftui-images.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        图片的处理
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="swiftui-stacks.html">
            
                
                    <a href="./swiftui-stacks.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        以堆叠布局使用者介面
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5" data-path="swiftui-scrollview.html">
            
                
                    <a href="./swiftui-scrollview.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        ScrollView 与 Carousel UI 的建立
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="swiftui-buttons.html">
            
                
                    <a href="./swiftui-buttons.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        SwiftUI 按钮与渐层
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="swiftui-state.html">
            
                
                    <a href="./swiftui-state.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        状态(State)与绑定(Binding)
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="swiftui-path-shape.html">
            
                
                    <a href="./swiftui-path-shape.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        实现路径(Path)与形状(Shape)来画线与圆饼图
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="9" data-path="swiftui-animation.html">
            
                
                    <a href="./swiftui-animation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        基础动画与转场
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="10" data-path="swiftui-list.html">
            
                
                    <a href="./swiftui-list.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        动态列表、 ForEach 与 Identifiable 的使用方法
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="11" data-path="swiftui-navigation.html">
            
                
                    <a href="./swiftui-navigation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                        导览UI与导览列客制化运用
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="12" data-path="swiftui-modal.html">
            
                
                    <a href="./swiftui-modal.html">
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                        强制回应视图、浮动按钮与提示的实现
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="13" data-path="swiftui-form.html">
            
                
                    <a href="./swiftui-form.html">
                        <i class="fa fa-check"></i>
                        
                            <b>13.</b>
                        
                        以选取器(Picker)、开关(Toggle)与步进器(Stepper)来建立一个表单
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="14" data-path="swiftui-form-data.html">
            
                
                    <a href="./swiftui-form-data.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.</b>
                        
                        使用 Combine 与 Environment 物件进行资料分享
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="15" data-path="swiftui-form-registration.html">
            
                
                    <a href="./swiftui-form-registration.html">
                        <i class="fa fa-check"></i>
                        
                            <b>15.</b>
                        
                        以 Combine 与 视图模型建立一个注册表单
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="16" data-path="swiftui-actionsheet-context.html">
            
                
                    <a href="./swiftui-actionsheet-context.html">
                        <i class="fa fa-check"></i>
                        
                            <b>16.</b>
                        
                        滑动删除、内容选单与动作列表
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="17" data-path="swiftui-gestures.html">
            
                
                    <a href="./swiftui-gestures.html">
                        <i class="fa fa-check"></i>
                        
                            <b>17.</b>
                        
                        认识手势（Gestures）
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="18" data-path="swiftui-bottom-sheet.html">
            
                
                    <a href="./swiftui-bottom-sheet.html">
                        <i class="fa fa-check"></i>
                        
                            <b>18.</b>
                        
                        以SwiftUI 手势与 GeometryReader 建立一个底部展开式页面
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="19" data-path="swiftui-trip-tinder.html">
            
                
                    <a href="./swiftui-trip-tinder.html">
                        <i class="fa fa-check"></i>
                        
                            <b>19.</b>
                        
                        使用手势与动画建立 Tinder 风格的 UI
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="20" data-path="swiftui-advanced-animations.html">
            
                
                    <a href="./swiftui-advanced-animations.html">
                        <i class="fa fa-check"></i>
                        
                            <b>20.</b>
                        
                        建立像 Apple Wallet App 的动画和转场效果
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="21" data-path="swiftui-json.html">
            
                
                    <a href="./swiftui-json.html">
                        <i class="fa fa-check"></i>
                        
                            <b>21.</b>
                        
                        JSON、滑杆的运用与资料过滤
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="22" data-path="swiftui-core-data.html">
            
                
                    <a href="./swiftui-core-data.html">
                        <i class="fa fa-check"></i>
                        
                            <b>22.</b>
                        
                        如何使用 Core Data 建立 ToDo App
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="23" data-path="swiftui-uikit.html">
            
                
                    <a href="./swiftui-uikit.html">
                        <i class="fa fa-check"></i>
                        
                            <b>23.</b>
                        
                        利用 UIViewRepresentable 整合UIKit 组件
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="24" data-path="swiftui-searchbar.html">
            
                
                    <a href="./swiftui-searchbar.html">
                        <i class="fa fa-check"></i>
                        
                            <b>24.</b>
                        
                        建立搜寻栏视图并使用自订绑定（Custom Binding）
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="25" data-path="swiftui-real-world-app.html">
            
                
                    <a href="./swiftui-real-world-app.html">
                        <i class="fa fa-check"></i>
                        
                            <b>25.</b>
                        
                        把所学应用出来！构建个人理财App
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="26" data-path="swiftui-appstoreanimation.html">
            
                
                    <a href="./swiftui-appstoreanimation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>26.</b>
                        
                        创建类似App Store使用的动画视图转换
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="27" data-path="swiftui-carousel.html">
            
                
                    <a href="./swiftui-carousel.html">
                        <i class="fa fa-check"></i>
                        
                            <b>27.</b>
                        
                        如何建立图像轮播（Image Carousel）
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="28" data-path="swiftui-expandable-list.html">
            
                
                    <a href="./swiftui-expandable-list.html">
                        <i class="fa fa-check"></i>
                        
                            <b>28.</b>
                        
                        如何建立展开式列表视图和大纲视图
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="29" data-path="swiftui-gridlayout.html">
            
                
                    <a href="./swiftui-gridlayout.html">
                        <i class="fa fa-check"></i>
                        
                            <b>29.</b>
                        
                        使用 LazyVGrid 和 LazyHGrid 构建集合视图
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="30" data-path="swiftui-progress-ring.html">
            
                
                    <a href="./swiftui-progress-ring.html">
                        <i class="fa fa-check"></i>
                        
                            <b>30.</b>
                        
                        使用 Shape 和 Animatable 开发带动画的环形进度条
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="31" data-path="swiftui-library.html">
            
                
                    <a href="./swiftui-library.html">
                        <i class="fa fa-check"></i>
                        
                            <b>31.</b>
                        
                        如何使用 AnimatableModifier 和 LibraryContentProvider
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="32" data-path="swiftui-texteditor.html">
            
                
                    <a href="./swiftui-texteditor.html">
                        <i class="fa fa-check"></i>
                        
                            <b>32.</b>
                        
                        使用 TextEditor 支持多行文字输入
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="33" data-path="swiftui-matchedgeometry.html">
            
                
                    <a href="./swiftui-matchedgeometry.html">
                        <i class="fa fa-check"></i>
                        
                            <b>33.</b>
                        
                        使用 matchedGeometryEffect为 App 建立绚丽的视图动画
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="34" data-path="swiftui-grid-animation.html">
            
                
                    <a href="./swiftui-grid-animation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>34.</b>
                        
                        ScrollViewReader 和网格动画
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="35" data-path="swiftui-tabview.html">
            
                
                    <a href="./swiftui-tabview.html">
                        <i class="fa fa-check"></i>
                        
                            <b>35.</b>
                        
                        标签视图的运用与自订标签列
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="36" data-path="swiftui-asyncimage.html">
            
                
                    <a href="./swiftui-asyncimage.html">
                        <i class="fa fa-check"></i>
                        
                            <b>36.</b>
                        
                        利用 AsyncImage 非同步加载和显示图像
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="37" data-path="swiftui-searchable.html">
            
                
                    <a href="./swiftui-searchable.html">
                        <i class="fa fa-check"></i>
                        
                            <b>37.</b>
                        
                        利用 Searchable 建立搜寻栏
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="38" data-path="swiftui-charts.html">
            
                
                    <a href="./swiftui-charts.html">
                        <i class="fa fa-check"></i>
                        
                            <b>38.</b>
                        
                        利用 Charts 框架建立图表
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="39" data-path="swiftui-live-text.html">
            
                
                    <a href="./swiftui-live-text.html">
                        <i class="fa fa-check"></i>
                        
                            <b>39.</b>
                        
                        利用 Live Text API 从图片中撷取文本
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="40" data-path="swiftui-sharelink.html">
            
                
                    <a href="./swiftui-sharelink.html">
                        <i class="fa fa-check"></i>
                        
                            <b>40.</b>
                        
                        通过 ShareLink 来分享文本和图像等资料
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="41" data-path="swiftui-imagerenderer.html">
            
                
                    <a href="./swiftui-imagerenderer.html">
                        <i class="fa fa-check"></i>
                        
                            <b>41.</b>
                        
                        利用 ImageRenderer API 轻松把 SwiftUI 视图转换为图像
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="42" data-path="swiftui-pdf-doc.html">
            
                
                    <a href="./swiftui-pdf-doc.html">
                        <i class="fa fa-check"></i>
                        
                            <b>42.</b>
                        
                        如何把 SwiftUI 视图转换为 PDF 文件
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="43" data-path="swiftui-gauge.html">
            
                
                    <a href="./swiftui-gauge.html">
                        <i class="fa fa-check"></i>
                        
                            <b>43.</b>
                        
                        使用 Gauge 视图显示进度并创建速度计
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="44" data-path="swiftui-grid.html">
            
                
                    <a href="./swiftui-grid.html">
                        <i class="fa fa-check"></i>
                        
                            <b>44.</b>
                        
                        使用Grid API 创建网格布局
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="45" data-path="swiftui-anylayout.html">
            
                
                    <a href="./swiftui-anylayout.html">
                        <i class="fa fa-check"></i>
                        
                            <b>45.</b>
                        
                        利用 AnyLayout 切换 UI 布局
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="46" data-path="swiftui-navigationstack.html">
            
                
                    <a href="./swiftui-navigationstack.html">
                        <i class="fa fa-check"></i>
                        
                            <b>46.</b>
                        
                        使用新的 NavigationStack 视图构建资料导向的导航
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                本书使用 GitBook 释出
            </a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="目录"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="搜寻"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="字型设定"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">衬线体</button>
        <button type="button" data-font="1" class="button">无衬线体</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">白色</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">棕褐色</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">夜间</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="分享"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    分享到 Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    分享到 Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    分享到 Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    分享到 Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    分享到 Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >精通 SwiftUI - iOS 16 版</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="%E7%AC%AC-1-%E7%AB%A0-br-swiftui-%E7%9A%84%E4%BB%8B%E7%B4%B9">第 1 章 <br>SwiftUI 的介绍</h1>
<p>2019 年的 WWDC，Apple 宣布了一个全新的框架（Framework ），称为“SwiftUI”， 这让所有的开发者都大为惊讶。这不只改变了开发 iOS App 的方式，也是自从 Swift 问世以来，Apple 开发者的生态系统（包括iPadOS、macOS、tvOS 与 watchOS）的最大转变。</p>
<blockquote>
<p>SwiftUI 以一种创新且极度简单的方式，通过 Swift 的力量，让使用者建立横跨所有 Apple 平台的使用者介面。只要一套工具与 API，即能建立适用所有 Apple 装置的使用者介面。</p>
<p>- Apple (<a href="https://developer.apple.com/xcode/swiftui/" target="_blank">https://developer.apple.com/xcode/swiftui/</a>)</p>
</blockquote>
<p>开发者已经对于“应该使用故事板（Storyboard ）或是以程式化的方式来建立 App UI”一事争论已久，而 SwiftUI 的导入，即是Apple 对这个问题的解答。有了这个全新的框架， Apple 提供开发者一个建立使用者介面的新方式。请参见图 1.1，并看一下它的程式。</p>
<figure id="fig1.1"><img src="images/basic/swiftui-basic-1.jpg" alt="图 1.1 SwiftUI 的程式"><figcaption>图 1.1 SwiftUI 的程式</figcaption></figure>
<p>自 SwiftUI 推出之后，你可以使用声明式（Declarative ）的 Swift 语法来开发 App 的 UI，这表示这个 UI 程式的语法更容易且自然。和目前的UI 框架做比较，如 UIKit，你可以使用较少的代码来建立相同的UI。</p>
<p>预览功能一直是 Xcode 的弱点，虽然你可以在介面建构器（ Interface Builder ）预览简单的布局，不过通常无法预览完整的 UI，除非 App 被载入模拟器（ Simulator ）才行。有了 SwiftUI，一边写程式，一边就可以立即看到 UI 的成果。举例而言，你在表格中加入一笔新纪录，Xcode 会立即在预览画布（Preview Canvas）上渲染（Render）UI 的改变结果。如果你想在深色模式（dark mode）预览你的 UI，你只要变更一个选项即可，这个即时预览功能让 UI 的开发更加容易，且更新的速度更快。</p>
<p>不只可以预览 UI，新的画布也可以让你使用视觉拖曳的方式来设计使用者介面。最棒的是，当你以视觉方式加入UI 元件时，Xcode 会自动地产生 SwiftUI 程式。程式与UI 总是同步的，这是 Apple 开发者期待以久的功能。</p>
<p>在本书中，你将会深入 SwiftUI，学习如何布局内建元件，并以这个框架建立复杂的 UI。我知道你们之中已经有iOS 开发经验，让我先来告知你，目前你所使用的框架（如UIKit）与 SwiftUI 的主要差异性。如果你完全是一个新的 iOS 开发者，甚至没有任何程式经验，你可以先将这作为参考，或者跳过 1.1 小节，我不想要因此而让你远离SwiftUI， 因为对于初学者来说，这是一个非常棒的框架。</p>
<h3 id="%E5%AE%A3%E5%91%8A%E5%BC%8F%E7%A8%8B%E5%BC%8F%E8%A8%AD%E8%A8%88%E8%88%87%E6%8C%87%E4%BB%A4%E5%BC%8F%E7%A8%8B%E5%BC%8F%E8%A8%AD%E8%A8%88">声明式程式设计与指令式程式设计</h3>
<p>和Java、C++、PHP 与 C# 一样， 自从 Swift 释出以来， 一直是一个指令式程式（ Imperative Programming ）语言。不过，SwiftUI 很自豪的声称是一个声明式 UI 框架（ Declarative UI Framework ），可以让开发者以声明式的方式来建立 UI。但是这个“声明式”（declarative ）的意思是什么呢？又和指令式程式设计有何不同？更重要的是，这会对你写程式的方式有什么改变？ </p>
<p>如果你才刚开始学习程式。你可能不需要去管这之间的差异为何，因为对你来说，一切都是新的内容。不过，如果你有些物件导向的程式经验，或之前曾以 UIKit 开发过，这个转变模式影响了你如何建立使用者介面的思考方式。你可能需要忘记一些旧思维来学习新观念。</p>
<p>那么，指令式程式设计与声明式程式设计的不同之处为何呢？如果你至维基百科搜寻这两个专有名词，你会找到这些定义： </p>
<blockquote>
<p>在电脑科学中，指令式程式设计是一种使用了叙述语句来变更程式状态的程式设计典范（Programming Paradigm ）。就像在自然语言中表达祈使句指令一样的方式。指令式程式设计包含了许多让电脑能够执行的指令。</p>
<p>在电脑科学中，声明式程式设计是一种建构电脑程式的结构与元件风格的程式设计典范，没有叙述控制流程来表达运算逻辑。</p>
</blockquote>
<p>如果你没有学过电脑科学的话，非常难了解其中的差异性。让我以不同的方式来做解释。</p>
<p>这里不将重点放在程式设计，我们来谈一下披萨的烹饪（或任何你喜欢的料理）。假设你要求你的帮手去准备一个披萨，你可以使用指令式或者声明式的方式来做。要以指令式烹饪披萨，你需要很清楚地告诉你的帮手每一个指示，就像食谱一样： </p>
<ol>
<li>加热到 550 ℉或更高，至少要 30 分钟。</li>
<li>准备一磅面团。</li>
<li>将面团揉成 10 英吋大小的圆。</li>
<li>将蕃茄酱以汤匙舀入披萨的中间，并均匀涂抹至边缘。</li>
<li>再撒上一些配料（包括洋葱、切片蘑菇、义式辣肉肠（ pepperoni）、煮过的香肠、煮过的培根、切细的辣椒）与起司。</li>
<li>将披萨烘烤 5 分钟。</li>
</ol>
<p>此外，如果你是以声明式的方式，你不需要订定所有的步骤，只要描述你想要做什么样的披萨，厚皮或者薄皮？要义式辣肉肠与培根，或只是经典的玛格莉特（ margherita ） 加上番茄酱？10 吋或者16 吋？这个帮手将会处理剩下的事，并为你烘烤披萨。</p>
<p>这是指令式与声明式的主要不同之处。现在回到 UI 程式，指令式 UI 程式设计需要开发者写下细节的指示，来布局 UI 以及控制其状态。反之，声明式UI 程式设计让开发者描述 UI 的样貌，以及状态改变时你要它能做什么。</p>
<p>声明式的程式风格可以让程式更容易阅读与理解。更重要的是，SwiftUI 框架可以让你以很少的代码，来建立一个使用者介面。例如：你准备要在 App 中建立一个心形按钮， 这个按钮应该放置于荧幕中心，并且能够侦测触控事件，当使用者点击这个心形按钮时， 它的颜色会从红色变为黄色，而当使用者按下这个心形不放时，它会以动画形式放大。</p>
<figure id="fig1.2"><img src="images/basic/swiftui-basic-2.gif" alt="图 1.2. 心形互动按钮的实现"><figcaption>图 1.2. 心形互动按钮的实现</figcaption></figure>
<p>参考一下图 1.2，此为实现心形按钮所需要的程式，大约 20 行的程式，你就可以建立一个互动式按钮，并加上一个缩放动画，而这就是声明式 UI 框架的威力之处。</p>
<h3 id="%E4%B8%8D%E5%86%8D%E6%98%AF%E4%BB%8B%E9%9D%A2%E5%BB%BA%E6%A7%8B%E5%99%A8%E8%88%87%E8%87%AA%E5%8B%95%E4%BD%88%E5%B1%80">不再是介面建构器与自动布局</h3>
<p>在 Xcode 11 以上版本，你可以选取 SwiftUI 与 Storyboard 来建构使用者介面，如图 1.3 所示。如果你之前已建立过App，你可能使用介面建构器在故事板上布局 UI，但是有了 SwiftUI， 介面建构器与故事板则完全消失。它会被程式编辑器与预览画布所取代，如图 1.2 所示。你需要将程式写在程式编辑器，然后 Xcode 会即时渲染使用者介面，并将其显示在画布中。</p>
<figure id="fig1.3"><img src="images/basic/swiftui-basic-3.png" alt="图 1.3. 在 Xcode 中的使用者介面选项"><figcaption>图 1.3. 在 Xcode 中的使用者介面选项</figcaption></figure>
<p>“自动布局”（ Auto Layout）一直是学习iOS 开发中的一个困难的主题。有了 SwiftUI， 你不再需要学习如何定义一个布局约束条件，并解决布局的冲突问题。现在只要使用堆叠（ Stack ）、间隔（ Spacer ）与间距（ Padding ），来组成想设计的UI 即可。我们将在后面的章节讨论这些观念。</p>
<h3 id="combine-%E6%96%B9%E6%B3%95">Combine 方法</h3>
<p>除了故事板之外，视图控制器（ View Controller ）也不见了。对于新手，你可以忽略什么是视图控制器。若你是有经验的开发者，你会发现一件奇怪的事，即 SwiftUI 没有使用一个视图控制器来当作一个中心建构区块，以作为视图与模型间的沟通。 </p>
<p>视图之间的沟通与资料分享，现在是通过另外一个称为“Combine”（合并）的新框架来进行。这个新的方法完全取代了在UIKit 中视图控制器的角色。在本书中，我们将会说明 Combine 的基本观念，学习如何使用它来处理UI 事件。</p>
<h3 id="%E5%AD%B8%E4%B8%80%E6%AC%A1%E5%88%B0%E8%99%95%E9%81%A9%E7%94%A8">学一次到处适用</h3>
<p>虽然本书将重点放在 iOS UI 的建立，但你在这里所学到的内容，也可以应用在其他 Apple 平台，例如：watchOS。在 SwiftUI 推出之前，你需要使用平台特定的 UI 框架来开发使用者介面，例如：使用 AppKit 来撰写macOS App 的 UI；要开发 tvOS App，则依赖 TVUIKit；而开发 watchOS App，则是使用 WatchKit。</p>
<p>SwiftUI 推出之后，Apple 提供开发者一个统一的 UI 框架，来建立所有 Apple 装置的使用者介面。为 iOS 所撰写的UI 代码，可以轻易地移植到你的 watchOS/macOS/watchOS App，而不需要修改，或只要做小幅度的修正即可，这要归功于“声明式 UI 框架”。</p>
<p>使用者介面的程式叙述如下。依照平台，在 SwiftUI 中的同一段程式，可以产生不同的 UI 控制。举例而言，以下这段程式为声明一个切换开关： </p>
<pre><code class="lang-swift"><span class="hljs-type">Toggle</span>(isOn: $isOn) {
    <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Wifi&quot;</span>)
        .font(.system(.title))
        .bold()
}.padding()
</code></pre>
<p>对于 iOS 与 iPadOS，Toggle 会渲染为开关。而 macOS ，SwiftUI 会将这个控制元件（control ）渲染为核取方块样式，如图1.4 所示。</p>
<figure id="fig1.4"><img src="images/basic/swiftui-basic-4.png" alt="图 1.4. macOS 与iOS 的切换开关"><figcaption>图 1.4. macOS 与iOS 的切换开关</figcaption></figure>
<p>这个统一框架的美妙之处，即是你可以针对所有 Apple 平台重复使用大部分的程式，而无需变更。SwiftUI 协助渲染对应的控制与布局等这些繁重的工作。</p>
<p>不过，不要认为 SwiftUI 是一个“写一次，到处可以执行”的解决方案。如同Apple 在 WWDC 所强调的，这不是SwiftUI 的目标。因此，不要期望你可以完美地将美丽的 iOS App 转换成 tvOS App，而不需要做任何的修改。</p>
<blockquote>
<p>只要是合适的地方，一定是有机会共享相同的代码。重要的是，我们不能将 SwiftUI 想成写一次，到处执行，而是学习一次，到处适用。</p>
<p>- WWDC 讲座（SwiftUI 于所有装置）</p>
</blockquote>
<p>虽然 UI 程式是可以跨平台，对于特定类型的装置，你依然需要提供对应的规格。你应该要常常检视你的 App 的每一个版本，以确保对某个平台是正确的。这么说好了， SwiftUI 已经省下了你学习另外一个平台专用框架的许多时间，而且你可以重用大部分的代码。</p>
<h3 id="uikit-appkit-watchkit-%E7%9A%84%E4%BB%8B%E6%8E%A5">UIKit/AppKit/WatchKit 的介接</h3>
<p>我可以在我目前的项目中使用 SwiftUI 吗？我不想要重写整个以 UIKit 所建立的 App。</p>
<p>SwiftUI 可以设计用于目前的框架如 iOS 的 UIKit 与 macOS 的 Appkit。为了能够将视图或控制器加入 SwiftUI 中，Apple 提供几个代表性（representable）的协定供你采用，如图 1.5 所示。</p>
<figure id="fig1.5"><img src="images/basic/swiftui-basic-5.png" alt="图 1.5. 目前 UI 框架的代表性协定"><figcaption>图 1.5. 目前 UI 框架的代表性协定</figcaption></figure>
<p>例如：若你有一个自订的视图是使用 UIKit 开发，你可以采用 UIViewRepresentable 协定，来让它相容 SwiftUI。图 1.6 是在 SwiftUI 中使用 <code>WKWebView</code> 的示例程式。</p>
<figure id="fig1.6"><img src="images/basic/swiftui-basic-6.png" alt="图 1.6. 移植 WKWebView 至 SwiftUI"><figcaption>图 1.6. 移植 WKWebView 至 SwiftUI</figcaption></figure>
<h3 id="%E4%B8%8B%E4%B8%80%E5%80%8B%E5%B0%88%E6%A1%88%E6%94%B9%E6%8E%A1swiftui-%E5%90%A7">下一个项目改采SwiftUI 吧</h3>
<p>每当一个新框架释出后，通常就会有人问：“这个框架是否可以用在我下一个项目中，是否应再观望一些时间？”</p>
<p>虽然 SwiftUI 对大部分开发者而言依然是全新的，这也正是学习并整合这个框架进入你的新项目的好时机。随着 Xcode 14 释出，经过 Apple 改版后的 SwiftUI 框架已经更加稳定，功能也更多。如果你有一些个人的项目或者是你的公司一些业余项目（ Side Project ）在进行，我想没有什么理由不尝试一下 SwiftUI。</p>
<p>必须这样说，你需要仔细考虑是否要在你的商业性项目中应用SwiftUI。SwiftUI 的一个主要缺点是只能在运行 iOS 13、macOS 10.15、tvOS 13 与 watchOS 6 版本以上的装置才能执行。如果你的 App 仍需要支持比较旧版本（例如 iOS 12）的平台，这种情况下，可能需要等待一下，再来采用 SwiftUI。</p>
<p>在撰写本书时，SwiftUI 已经超过三年，Xcode 14 已经为 SwiftUI 增加了更多的 UI 控制与新的 API（例如 Charts），就功能而言，你无法和目前释出多年的UI 框架（如 UIKit ）相比。一些功能（例如：使用照相机）很明显就只有旧框架有，而无法在 SwiftUI 取得，你可能需要开发一些解决方案来处理这些问题。在已经上市的产品采用 SwiftUI，需要再多做一点考量。</p>
<p>无疑的，SwiftUI 还是很新的，需要一些时间才能变成一个成熟的框架，但很明确的， SwiftUI 是 Apple 平台应用程式开发的未来，即使目前可能还无法应用在你的项目中。建议可从一些业余的产品来开始尝试，并摸索这个框架，当你更加熟练之后，你将会喜爱以声明式来开发 UI。</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./index.html" class="navigation navigation-prev " aria-label="Previous page: 序言"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./swiftui-text.html" class="navigation navigation-next " aria-label="Next page: SwiftUI 入门 - 文字的处理"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":"white","family":"serif","size":3},"image-captions":{"caption":"_CAPTION_","variable_name":"_pictures"}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
