<!DOCTYPE HTML>
<html lang="zh-tw" >
    
    <head>
        
        <meta charset=utf-8"UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=11; IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
        <title>ScrollView 与 Carousel UI 的建立 | 精通 SwiftUI - iOS 16 版</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.0.1">
        <meta name="author" content="Simon Ng">
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    <link rel="next" href="./swiftui-buttons.html" />
    
    
    <link rel="prev" href="./swiftui-stacks.html" />
    

        
    </head>
    <body>
        
        
    <link rel="stylesheet" href="gitbook/style.css">
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-image-captions/image-captions.css">
        
    
    
        <link rel="stylesheet" href="././styles/website.css">
    

        
    <div class="book" data-level="5" data-basepath="." data-revision="Thu Dec 01 2022 17:36:55 GMT+0800 (HKT)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="输入并搜寻" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
            
            <li>
                <a href="https://www.appcoda.com.tw" target="blank" class="custom-link">Made by AppCoda</a>
            </li>
        
            
            <li>
                <a href="https://www.appcoda.com.tw/contact" target="blank" class="custom-link">Contact us / Support</a>
            </li>
        
            
            <li>
                <a href="http://twitter.com/share?text=Mastering%20SwiftUI%20via%20@appcodamobile&amp;url=https://www.appcoda.com.tw/swiftui/&amp;hashtags=swiftlang" target="blank" class="custom-link">Tweet this book</a>
            </li>
        
        

        
        <li class="divider"></li>
        

        
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                        <i class="fa fa-check"></i>
                        
                        序言
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="swiftui-basics.html">
            
                
                    <a href="./swiftui-basics.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        SwiftUI 介绍
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="swiftui-text.html">
            
                
                    <a href="./swiftui-text.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        SwiftUI 入门 - 文字的处理
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="swiftui-images.html">
            
                
                    <a href="./swiftui-images.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        图片的处理
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="swiftui-stacks.html">
            
                
                    <a href="./swiftui-stacks.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        以堆叠布局使用者介面
                    </a>
                
            
            
        </li>
    
        <li class="chapter active" data-level="5" data-path="swiftui-scrollview.html">
            
                
                    <a href="./swiftui-scrollview.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        ScrollView 与 Carousel UI 的建立
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="swiftui-buttons.html">
            
                
                    <a href="./swiftui-buttons.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        SwiftUI 按钮与渐层
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="swiftui-state.html">
            
                
                    <a href="./swiftui-state.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        状态(State)与绑定(Binding)
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="swiftui-path-shape.html">
            
                
                    <a href="./swiftui-path-shape.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        实现路径(Path)与形状(Shape)来画线与圆饼图
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="9" data-path="swiftui-animation.html">
            
                
                    <a href="./swiftui-animation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        基础动画与转场
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="10" data-path="swiftui-list.html">
            
                
                    <a href="./swiftui-list.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        动态列表、 ForEach 与 Identifiable 的使用方法
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="11" data-path="swiftui-navigation.html">
            
                
                    <a href="./swiftui-navigation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                        导航UI与导航列客制化运用
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="12" data-path="swiftui-modal.html">
            
                
                    <a href="./swiftui-modal.html">
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                        强制回应视图、浮动按钮与提示的实现
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="13" data-path="swiftui-form.html">
            
                
                    <a href="./swiftui-form.html">
                        <i class="fa fa-check"></i>
                        
                            <b>13.</b>
                        
                        以选取器(Picker)、开关(Toggle)与步进器(Stepper)来建立一个表单
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="14" data-path="swiftui-form-data.html">
            
                
                    <a href="./swiftui-form-data.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.</b>
                        
                        使用 Combine 与 Environment 物件进行数据分享
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="15" data-path="swiftui-form-registration.html">
            
                
                    <a href="./swiftui-form-registration.html">
                        <i class="fa fa-check"></i>
                        
                            <b>15.</b>
                        
                        以 Combine 与 视图模型建立一个注册表单
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="16" data-path="swiftui-actionsheet-context.html">
            
                
                    <a href="./swiftui-actionsheet-context.html">
                        <i class="fa fa-check"></i>
                        
                            <b>16.</b>
                        
                        滑动删除、内容选单与动作列表
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="17" data-path="swiftui-gestures.html">
            
                
                    <a href="./swiftui-gestures.html">
                        <i class="fa fa-check"></i>
                        
                            <b>17.</b>
                        
                        认识手势（Gestures）
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="18" data-path="swiftui-bottom-sheet.html">
            
                
                    <a href="./swiftui-bottom-sheet.html">
                        <i class="fa fa-check"></i>
                        
                            <b>18.</b>
                        
                        以SwiftUI 手势与 GeometryReader 建立一个底部展开式页面
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="19" data-path="swiftui-trip-tinder.html">
            
                
                    <a href="./swiftui-trip-tinder.html">
                        <i class="fa fa-check"></i>
                        
                            <b>19.</b>
                        
                        使用手势与动画建立 Tinder 风格的 UI
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="20" data-path="swiftui-advanced-animations.html">
            
                
                    <a href="./swiftui-advanced-animations.html">
                        <i class="fa fa-check"></i>
                        
                            <b>20.</b>
                        
                        建立像 Apple Wallet App 的动画和转场效果
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="21" data-path="swiftui-json.html">
            
                
                    <a href="./swiftui-json.html">
                        <i class="fa fa-check"></i>
                        
                            <b>21.</b>
                        
                        JSON、滑杆的运用与数据过滤
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="22" data-path="swiftui-core-data.html">
            
                
                    <a href="./swiftui-core-data.html">
                        <i class="fa fa-check"></i>
                        
                            <b>22.</b>
                        
                        如何使用 Core Data 建立 ToDo App
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="23" data-path="swiftui-uikit.html">
            
                
                    <a href="./swiftui-uikit.html">
                        <i class="fa fa-check"></i>
                        
                            <b>23.</b>
                        
                        利用 UIViewRepresentable 整合UIKit 组件
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="24" data-path="swiftui-searchbar.html">
            
                
                    <a href="./swiftui-searchbar.html">
                        <i class="fa fa-check"></i>
                        
                            <b>24.</b>
                        
                        建立搜寻栏视图并使用自订绑定（Custom Binding）
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="25" data-path="swiftui-real-world-app.html">
            
                
                    <a href="./swiftui-real-world-app.html">
                        <i class="fa fa-check"></i>
                        
                            <b>25.</b>
                        
                        把所学应用出来！构建个人理财App
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="26" data-path="swiftui-appstoreanimation.html">
            
                
                    <a href="./swiftui-appstoreanimation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>26.</b>
                        
                        创建类似App Store使用的动画视图转换
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="27" data-path="swiftui-carousel.html">
            
                
                    <a href="./swiftui-carousel.html">
                        <i class="fa fa-check"></i>
                        
                            <b>27.</b>
                        
                        如何建立图像轮播（Image Carousel）
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="28" data-path="swiftui-expandable-list.html">
            
                
                    <a href="./swiftui-expandable-list.html">
                        <i class="fa fa-check"></i>
                        
                            <b>28.</b>
                        
                        如何建立展开式列表视图和大纲视图
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="29" data-path="swiftui-gridlayout.html">
            
                
                    <a href="./swiftui-gridlayout.html">
                        <i class="fa fa-check"></i>
                        
                            <b>29.</b>
                        
                        使用 LazyVGrid 和 LazyHGrid 构建集合视图
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="30" data-path="swiftui-progress-ring.html">
            
                
                    <a href="./swiftui-progress-ring.html">
                        <i class="fa fa-check"></i>
                        
                            <b>30.</b>
                        
                        使用 Shape 和 Animatable 开发带动画的环形进度条
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="31" data-path="swiftui-library.html">
            
                
                    <a href="./swiftui-library.html">
                        <i class="fa fa-check"></i>
                        
                            <b>31.</b>
                        
                        如何使用 AnimatableModifier 和 LibraryContentProvider
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="32" data-path="swiftui-texteditor.html">
            
                
                    <a href="./swiftui-texteditor.html">
                        <i class="fa fa-check"></i>
                        
                            <b>32.</b>
                        
                        使用 TextEditor 支持多行文字输入
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="33" data-path="swiftui-matchedgeometry.html">
            
                
                    <a href="./swiftui-matchedgeometry.html">
                        <i class="fa fa-check"></i>
                        
                            <b>33.</b>
                        
                        使用 matchedGeometryEffect为 App 建立绚丽的视图动画
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="34" data-path="swiftui-grid-animation.html">
            
                
                    <a href="./swiftui-grid-animation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>34.</b>
                        
                        ScrollViewReader 和网格动画
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="35" data-path="swiftui-tabview.html">
            
                
                    <a href="./swiftui-tabview.html">
                        <i class="fa fa-check"></i>
                        
                            <b>35.</b>
                        
                        标签视图的运用与自订标签列
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="36" data-path="swiftui-asyncimage.html">
            
                
                    <a href="./swiftui-asyncimage.html">
                        <i class="fa fa-check"></i>
                        
                            <b>36.</b>
                        
                        利用 AsyncImage 非同步加载和显示图像
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="37" data-path="swiftui-searchable.html">
            
                
                    <a href="./swiftui-searchable.html">
                        <i class="fa fa-check"></i>
                        
                            <b>37.</b>
                        
                        利用 Searchable 建立搜寻栏
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="38" data-path="swiftui-charts.html">
            
                
                    <a href="./swiftui-charts.html">
                        <i class="fa fa-check"></i>
                        
                            <b>38.</b>
                        
                        利用 Charts 框架建立图表
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="39" data-path="swiftui-live-text.html">
            
                
                    <a href="./swiftui-live-text.html">
                        <i class="fa fa-check"></i>
                        
                            <b>39.</b>
                        
                        利用 Live Text API 从图片中撷取文本
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="40" data-path="swiftui-sharelink.html">
            
                
                    <a href="./swiftui-sharelink.html">
                        <i class="fa fa-check"></i>
                        
                            <b>40.</b>
                        
                        通过 ShareLink 来分享文本和图像等数据
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="41" data-path="swiftui-imagerenderer.html">
            
                
                    <a href="./swiftui-imagerenderer.html">
                        <i class="fa fa-check"></i>
                        
                            <b>41.</b>
                        
                        利用 ImageRenderer API 轻松把 SwiftUI 视图转换为图像
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="42" data-path="swiftui-pdf-doc.html">
            
                
                    <a href="./swiftui-pdf-doc.html">
                        <i class="fa fa-check"></i>
                        
                            <b>42.</b>
                        
                        如何把 SwiftUI 视图转换为 PDF 文件
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="43" data-path="swiftui-gauge.html">
            
                
                    <a href="./swiftui-gauge.html">
                        <i class="fa fa-check"></i>
                        
                            <b>43.</b>
                        
                        使用 Gauge 视图显示进度并创建速度计
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="44" data-path="swiftui-grid.html">
            
                
                    <a href="./swiftui-grid.html">
                        <i class="fa fa-check"></i>
                        
                            <b>44.</b>
                        
                        使用Grid API 创建网格布局
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="45" data-path="swiftui-anylayout.html">
            
                
                    <a href="./swiftui-anylayout.html">
                        <i class="fa fa-check"></i>
                        
                            <b>45.</b>
                        
                        利用 AnyLayout 切换 UI 布局
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="46" data-path="swiftui-navigationstack.html">
            
                
                    <a href="./swiftui-navigationstack.html">
                        <i class="fa fa-check"></i>
                        
                            <b>46.</b>
                        
                        使用新的 NavigationStack 视图构建数据导向的导航
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                本书使用 GitBook 释出
            </a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="目录"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="搜寻"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="字型设定"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">衬线体</button>
        <button type="button" data-font="1" class="button">无衬线体</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">白色</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">棕褐色</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">夜间</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="分享"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    分享到 Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    分享到 Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    分享到 Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    分享到 Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    分享到 Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >精通 SwiftUI - iOS 16 版</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="%E7%AC%AC-5-%E7%AB%A0-br-%E4%BA%86%E8%A7%A3%E6%BB%BE%E5%8B%95%E8%A6%96%E5%9C%96%E8%88%87%E5%BB%BA%E7%AB%8B%E8%BC%AA%E6%92%AD-ui">第 5 章<br>了解滚动视图与建立轮播 UI</h1>
<p>从前一章中，我相信你现在应该了解如何使用堆叠建立一个复杂的UI。当然，在你能够熟练 SwiftUI 的运用之前，需要许多的练习才行。因此，在我们深入研究 ScrollView， 学习如何让视图滚动之前，我们先进行一个挑战，来作为本章的开始。你的任务是建立一个卡片视图（card view ），如图5.1 所示。</p>
<figure id="fig5.1"><img src="images/scrollview/swiftui-scrollview-1.png" alt="图 5.1. 卡片视图"><figcaption>图 5.1. 卡片视图</figcaption></figure>
<p>通过使用堆叠、图片与文字视图，你应该能够建立 UI。虽然我会逐步示范如何实现， 但请先花一些时间来思考如何完成这个任务，以及找出自己的解决方案。</p>
<p>当你完成卡片视图的建立之后，我将与你讨论 <code>ScrollView</code>，并使用卡片视图建立一个可滚动的介面，图 5.2 即是完成后的 UI。</p>
<figure id="fig5.2"><img src="images/scrollview/swiftui-scrollview-2.jpg" alt="图 5.2.　使用 ScrollView 建立一个滚动式UI"><figcaption>图 5.2.　使用 ScrollView 建立一个滚动式UI</figcaption></figure>
<h3 id="%E5%BB%BA%E7%AB%8B%E4%B8%80%E5%80%8B%E5%8D%A1%E7%89%87%E5%BC%8F-ui">建立一个卡片式 UI</h3>
<p>如果你还没有开启 Xcode，请开启它并使用 App  模板 （于 iOS 下）。来建立一个新项目。在下一个荧幕画面中，设定项目名称为“SwiftUIScrollView”（或是任何你喜欢的名称），并填入所需要的值。请确认已选取“Interface”选项中的“SwiftUI”。</p>
<p>到目前为止，我们在 <code>ContentView.swift</code> 档中撰写使用者介面的代码，代码撰写在这里完全没有任何问题，不过我要介绍一个整理代码的较佳方式。为了实现卡片视图， 我们另外为它建立一个单独文件，在项目导航器中，于 <code>SwiftUIScrollView</code> 按右键，并选择“New File...”，如图 5.3 所示。</p>
<figure id="fig5.3"><img src="images/scrollview/swiftui-scrollview-3.png" alt="图 5.3. 建立一个新文件"><figcaption>图 5.3. 建立一个新文件</figcaption></figure>
<p>如图 5.4 所示，在“User Interface”区块，选取“SwiftUI View”模板，然后点选“Next”来建立文件。将文件名称命名为 <code>CardView</code>，并将其储存在项目数据夹中。</p>
<figure id="fig5.4"><img src="images/scrollview/swiftui-scrollview-4.png" alt="图 5.4　选取 SwiftUI View 模板"><figcaption>图 5.4　选取 SwiftUI View 模板</figcaption></figure>
<p><code>CardView.swift</code> 中的代码与 <code>ContentView.swift</code> 中的代码很相似。同样的，你可以在画布中预览 UI，如图5.5 所示。</p>
<figure id="fig5.5"><img src="images/scrollview/swiftui-scrollview-5.png" alt="图 5.5. 就像ContentView.swift 一样，你可以在画布中预览CardView.swift"><figcaption>图 5.5. 就像ContentView.swift 一样，你可以在画布中预览CardView.swift</figcaption></figure>
<h4 id="%E6%BA%96%E5%82%99%E5%9C%96%E7%89%87%E6%AA%94">准备图片档</h4>
<p>现在，我们准备要撰写卡片视图的代码。但是，首先你需要准备图档，并将其汇入素材目录。如果你不想要准备自己的图片，则可以至 <a href="https://www.appcoda.com/resources/swiftui/SwiftUIScrollViewImages.zip" target="_blank">https://www.appcoda.com/resources/swiftui/SwiftUIScrollViewImages.zip</a> 下载示例图片档，将图片档解压缩后，选取 <code>Assets</code>，并所有图片其拖曳至素材目录。</p>
<figure id="fig5.6"><img src="images/scrollview/swiftui-scrollview-6.png" alt="图 5.6　将图片档加入素材目录"><figcaption>图 5.6　将图片档加入素材目录</figcaption></figure>
<h4 id="%E5%AF%A6%E4%BD%9C%E5%8D%A1%E7%89%87%E8%A6%96%E5%9C%96">实现卡片视图</h4>
<p>现在切回 <code>CardView.swift</code> 档。若你再看一下图 5.1，这个卡片视图是由两个部分组成， 视图上部是图片，而视图下部是文字叙述。</p>
<p>让我们从图片开始。我将使图片可调整大小，以缩放来填满荧幕，同时保持长宽比。你可以撰写代码如下： </p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">CardView</span>: <span class="hljs-title">View</span> </span>{
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">Image</span>(<span class="hljs-string">&quot;swiftui-button&quot;</span>)
            .resizable()
            .aspectRatio(contentMode: .fit)
    }
}
</code></pre>
<p>如果你忘记了这两个修饰器是什么，请返回并阅读有关 <code>Image</code> 物件的章节。接下来，我们来实现文字叙述部分，你可以撰写代码如下： </p>
<pre><code class="lang-swift"><span class="hljs-type">VStack</span>(alignment: .leading) {
    <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;SwiftUI&quot;</span>)
        .font(.headline)
        .foregroundColor(.secondary)
    <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Drawing a Border with Rounded Corners&quot;</span>)
        .font(.title)
        .fontWeight(.black)
        .foregroundColor(.primary)
        .lineLimit(<span class="hljs-number">3</span>)
    <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Written by Simon Ng&quot;</span>.uppercased())
        .font(.caption)
        .foregroundColor(.secondary)
}
</code></pre>
<p>显然的，你需要使用 <code>Text</code> 来建立文字视图。由于我们在叙述中实际上有三个垂直排列的文字视图，因此我们使用一个 <code>VStack</code> 来嵌入它们。对于 <code>VStack</code>，我们指定对齐方式为 <code>.leading</code>，这会将文字视图对齐堆叠视图的左侧。</p>
<p>这些文字的修饰器皆在有关 <code>Text</code> 物件的章节讨论过。如果你对任何修饰器有疑问的话，可以回去参考。但是，这里会特别提到有关 <code>.primary</code> 与 <code>.secondary</code> 颜色。</p>
<p>虽然你可在 <code>foregroundColor</code> 修饰器指定标准颜色，像是 <code>.black</code> 与 <code>.purple</code>，但 iOS 提供一套系统颜色，其中包含主色（ primary color ）、辅色（ secondary color ）、第三级色（ tertiary color ）等变化，通过使用此颜色变化，你的 App 可以轻松支持浅色模式与深色模式。举例而言，文字视图的主色默认设定为浅色模式的黑色。当 App 切换到深色模式， 主色将被调整为白色，这是由 iOS 自动调整，因此你无须另外编写写支持深色模式的代码，我们将在后面的章节中深入探讨深色模式。</p>
<p>为了将图片与这些文字视图垂直排列，我们使用 <code>VStack</code> 来嵌入它们，目前的布局如图 5.7 所示。</p>
<figure id="fig5.7"><img src="images/scrollview/swiftui-scrollview-7.png" alt="图 5.7.　将图片与文字视图嵌入到 VStack 中"><figcaption>图 5.7.　将图片与文字视图嵌入到 VStack 中</figcaption></figure>
<p>还没有完成，尚有几件事情需要实现。首先，如果文字叙述区块要与图片的边缘对齐，该如何做呢？ </p>
<p>依照我们所学，我们可以在一个 <code>HStack</code> 嵌入文字视图的 <code>VStack</code>，然后我们将使用一个留白（ <code>Spacer</code> ）来将<code>VStack</code> 往左推，我们来看看是否可行。</p>
<p>如果你已经变更代码，如图 5.8 所示，这个文字视图的VStack 会对齐荧幕的左侧。</p>
<figure id="fig5.8"><img src="images/scrollview/swiftui-scrollview-8.png" alt="图 5.8.　文字叙述的对齐"><figcaption>图 5.8.　文字叙述的对齐</figcaption></figure>
<p>最好是在 <code>HStack</code> 周围加入一些间距（ padding ）。插入 <code>padding</code> 修饰器如下，如图 5.9 所示 ：</p>
<figure id="fig5.9"><img src="images/scrollview/swiftui-scrollview-9.png" alt="图 5.9. 加入一些文字叙述的间距"><figcaption>图 5.9. 加入一些文字叙述的间距</figcaption></figure>
<p>最后是边框部分。我们在前面的章节中讨论过如何绘制圆角边框。我们可以使用 <code>overlay</code> 修饰器，并使用<code>RoundedRectangle</code> 来画出边框。以下是完整的代码： </p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">CardView</span>: <span class="hljs-title">View</span> </span>{
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">VStack</span> {
            <span class="hljs-type">Image</span>(<span class="hljs-string">&quot;swiftui-button&quot;</span>)
                .resizable()
                .aspectRatio(contentMode: .fit)

            <span class="hljs-type">HStack</span> {
                <span class="hljs-type">VStack</span>(alignment: .leading) {
                    <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;SwiftUI&quot;</span>)
                        .font(.headline)
                        .foregroundColor(.secondary)
                    <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Drawing a Border with Rounded Corners&quot;</span>)
                        .font(.title)
                        .fontWeight(.black)
                        .foregroundColor(.primary)
                        .lineLimit(<span class="hljs-number">3</span>)
                    <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Written by Simon Ng&quot;</span>.uppercased())
                        .font(.caption)
                        .foregroundColor(.secondary)
                }

                <span class="hljs-type">Spacer</span>()

            }
            .padding()
        }
        .cornerRadius(<span class="hljs-number">10</span>)
        .overlay(
            <span class="hljs-type">RoundedRectangle</span>(cornerRadius: <span class="hljs-number">10</span>)
                .stroke(<span class="hljs-type">Color</span>(.sRGB, red: <span class="hljs-number">150</span>/<span class="hljs-number">255</span>, green: <span class="hljs-number">150</span>/<span class="hljs-number">255</span>, blue: <span class="hljs-number">150</span>/<span class="hljs-number">255</span>, opacity: <span class="hljs-number">0.1</span>), lineWidth: <span class="hljs-number">1</span>)
        )
        .padding([.top, .horizontal])
    }
}
</code></pre>
<p>除了边框之外，我们也在顶部、左侧、右侧分别加入了一些间距。现在，你应该已经建立好卡片视图的布局，如图 5.10 所示。</p>
<figure id="fig5.10"><img src="images/scrollview/swiftui-scrollview-10.png" alt="图 5.10. 加入边框与圆角"><figcaption>图 5.10. 加入边框与圆角</figcaption></figure>
<h4 id="%E8%AE%93%E5%8D%A1%E7%89%87%E8%A6%96%E5%9C%96%E6%9B%B4%E5%85%B7%E5%BD%88%E6%80%A7">让卡片视图更具弹性</h4>
<p>虽然目前卡片视图看起来没问题，但我们将图片与文字写死（ Hard Code）在程式中， 为了让它更具弹性，我们要重构代码。首先，在 <code>CardView</code> 声明 image、category、heading 与author 这些变量： </p>
<pre><code class="lang-swift"><span class="hljs-keyword">var</span> image: <span class="hljs-type">String</span>
<span class="hljs-keyword">var</span> category: <span class="hljs-type">String</span>
<span class="hljs-keyword">var</span> heading: <span class="hljs-type">String</span>
<span class="hljs-keyword">var</span> author: <span class="hljs-type">String</span>
</code></pre>
<p>接下来，将 <code>Image</code> 与 <code>Text</code> 视图的值以下列变量替代： </p>
<pre><code class="lang-swift"><span class="hljs-type">VStack</span> {
    <span class="hljs-type">Image</span>(image)
        .resizable()
        .aspectRatio(contentMode: .fit)

    <span class="hljs-type">HStack</span> {
        <span class="hljs-type">VStack</span>(alignment: .leading) {
            <span class="hljs-type">Text</span>(category)
                .font(.headline)
                .foregroundColor(.secondary)
            <span class="hljs-type">Text</span>(heading)
                .font(.title)
                .fontWeight(.black)
                .foregroundColor(.primary)
                .lineLimit(<span class="hljs-number">3</span>)
            <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Written by <span class="hljs-subst">\(author)</span>&quot;</span>.uppercased())
                .font(.caption)
                .foregroundColor(.secondary)
        }

        <span class="hljs-type">Spacer</span>()
    }
    .padding()
}
</code></pre>
<p>更改完成后，你将在 <code>CardView_Previews</code> 结构中看到一个错误，如图 5.11 所示。这是因为我们在 <code>CardView</code> 导入了一些变量，当使用它时，必须指定参数给它。</p>
<figure id="fig5.11"><img src="images/scrollview/swiftui-scrollview-11.png" alt="图 5.11. 调用 CardView 时缺少参数"><figcaption>图 5.11. 调用 CardView 时缺少参数</figcaption></figure>
<p>因此，以下列代码来取代： </p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">CardView_Previews</span>: <span class="hljs-title">PreviewProvider</span> </span>{
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> previews: some <span class="hljs-type">View</span> {
        <span class="hljs-type">CardView</span>(image: <span class="hljs-string">&quot;swiftui-button&quot;</span>, category: <span class="hljs-string">&quot;SwiftUI&quot;</span>, heading: <span class="hljs-string">&quot;Drawing a Border with Rounded Corners&quot;</span>, author: <span class="hljs-string">&quot;Simon Ng&quot;</span>)
    }
}
</code></pre>
<p>错误将可被修正，现在你已经建立了一个能接受不同图片及文字的弹性 <code>CardView</code>。</p>
<h3 id="scrollview-%E7%9A%84%E4%BB%8B%E7%B4%B9">ScrollView 的介绍</h3>
<p>再看一下图5.2，这就是我们要实现的使用者介面。首先，你可能认为我们可以使用一个 <code>VStack</code> 来嵌入四个卡片视图。你可以切换到  <code>ContentView.swift</code> ，于 body 内插入以下的程式：</p>
<pre><code class="lang-swift"><span class="hljs-type">VStack</span> {
    <span class="hljs-type">CardView</span>(image: <span class="hljs-string">&quot;swiftui-button&quot;</span>, category: <span class="hljs-string">&quot;SwiftUI&quot;</span>, heading: <span class="hljs-string">&quot;Drawing a Border with Rounded Corners&quot;</span>, author: <span class="hljs-string">&quot;Simon Ng&quot;</span>)
    <span class="hljs-type">CardView</span>(image: <span class="hljs-string">&quot;macos-programming&quot;</span>, category: <span class="hljs-string">&quot;macOS&quot;</span>, heading: <span class="hljs-string">&quot;Building a Simple Editing App&quot;</span>, author: <span class="hljs-string">&quot;Gabriel Theodoropoulos&quot;</span>)
    <span class="hljs-type">CardView</span>(image: <span class="hljs-string">&quot;flutter-app&quot;</span>, category: <span class="hljs-string">&quot;Flutter&quot;</span>, heading: <span class="hljs-string">&quot;Building a Complex Layout with Flutter&quot;</span>, author: <span class="hljs-string">&quot;Lawrence Tan&quot;</span>)
    <span class="hljs-type">CardView</span>(image: <span class="hljs-string">&quot;natural-language-api&quot;</span>, category: <span class="hljs-string">&quot;iOS&quot;</span>, heading: <span class="hljs-string">&quot;What&apos;s New in Natural Language API&quot;</span>, author: <span class="hljs-string">&quot;Sai Kambampati&quot;</span>)
}
</code></pre>
<p>如果你这样做的话，这些卡片视图将被挤压，以填满荧幕，因为 <code>VStack</code> 是不可滚动的，如图 5.12 所示。</p>
<figure id="fig5.12"><img src="images/scrollview/swiftui-scrollview-12.png" alt="图 5.12　在一个VStack 中嵌入卡片视图"><figcaption>图 5.12　在一个VStack 中嵌入卡片视图</figcaption></figure>
<p>要让内容可以滚动，SwiftUI 提供一个名为 <code>ScrollView</code> 的视图。当内容嵌入在一个 <code>ScrollView</code> 时，它变得可以滚动，因此你需要做的是在一个 <code>ScrollView</code> 内加入一个 <code>VStack</code>，以使视图可以滚动。在预览画布中，你可以拖曳这些视图来滚动内容。</p>
<figure id="fig5.13"><img src="images/scrollview/swiftui-scrollview-13.png" alt="图 5.13. 使用 ScrollView"><figcaption>图 5.13. 使用 ScrollView</figcaption></figure>
<h3 id="%E4%BD%9C%E6%A5%AD-1">作业 #1</h3>
<p>你的任务是加入标题（ header ）至目前的滚动视图（ scroll view ）中，结果如图 5.14 所示。如果你完全暸解了  <code>Vstack</code>与  <code>Hstack</code>，你应该有能力建立这个布局。</p>
<figure id="fig5.14"><img src="images/scrollview/swiftui-scrollview-14.png" alt="图 5.14. 作业#1"><figcaption>图 5.14. 作业#1</figcaption></figure>
<h3 id="%E4%BD%BF%E7%94%A8%E6%B0%B4%E5%B9%B3-scrollview-%E5%BB%BA%E7%AB%8B%E8%BC%AA%E6%92%AD%E5%BC%8F-ui">使用水平 ScrollView 建立轮播式 UI</h3>
<p>默认上，<code>ScrollView</code> 允许你以垂直方向滚动内容。另外，它还支持水平方向的可滚动内容。我们来了解如何进行一些修改，以将目前的布局转换为轮播（carousel ）UI。</p>
<p>更新 <code>ContentView</code> 如下： </p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentView</span>: <span class="hljs-title">View</span> </span>{
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {

        <span class="hljs-type">ScrollView</span>(.horizontal) {

            <span class="hljs-comment">// 作业#1的代码</span>

            <span class="hljs-type">HStack</span> {
                <span class="hljs-type">CardView</span>(image: <span class="hljs-string">&quot;swiftui-button&quot;</span>, category: <span class="hljs-string">&quot;SwiftUI&quot;</span>, heading: <span class="hljs-string">&quot;Drawing a Border with Rounded Corners&quot;</span>, author: <span class="hljs-string">&quot;Simon Ng&quot;</span>)
                    .frame(width: <span class="hljs-number">300</span>)
                <span class="hljs-type">CardView</span>(image: <span class="hljs-string">&quot;macos-programming&quot;</span>, category: <span class="hljs-string">&quot;macOS&quot;</span>, heading: <span class="hljs-string">&quot;Building a Simple Editing App&quot;</span>, author: <span class="hljs-string">&quot;Gabriel Theodoropoulos&quot;</span>)
                    .frame(width: <span class="hljs-number">300</span>)
                <span class="hljs-type">CardView</span>(image: <span class="hljs-string">&quot;flutter-app&quot;</span>, category: <span class="hljs-string">&quot;Flutter&quot;</span>, heading: <span class="hljs-string">&quot;Building a Complex Layout with Flutter&quot;</span>, author: <span class="hljs-string">&quot;Lawrence Tan&quot;</span>)
                    .frame(width: <span class="hljs-number">300</span>)
                <span class="hljs-type">CardView</span>(image: <span class="hljs-string">&quot;natural-language-api&quot;</span>, category: <span class="hljs-string">&quot;iOS&quot;</span>, heading: <span class="hljs-string">&quot;What&apos;s New in Natural Language API&quot;</span>, author: <span class="hljs-string">&quot;Sai Kambampati&quot;</span>)
                    .frame(width: <span class="hljs-number">300</span>)
            }
        }

    }
}
</code></pre>
<p>我们在上列的代码中做了三个变更： </p>
<ol>
<li>我们传送一个 <code>.horizontal</code> 值，以在 <code>ScrollView</code> 中使用一个水平滚动视图。</li>
<li>由于我们使用一个水平滚动视图，因此我们还需要将堆叠视图从 <code>VStack</code> 变更为 <code>HStack</code>。</li>
<li>对于每个卡片视图，我们将框架的宽度设定为“300点”。这是必要的，因为要显示的图片太宽</li>
</ol>
<p>变更代码之后，你将看到卡片视图以水平排列且可以滚动，如图 5.15 所示。</p>
<figure id="fig5.15"><img src="images/scrollview/swiftui-scrollview-15.png" alt="图 5.15 轮播 UI"><figcaption>图 5.15 轮播 UI</figcaption></figure>
<h3 id="%E9%9A%B1%E8%97%8F%E6%BB%BE%E5%8B%95%E6%8C%87%E7%A4%BA%E5%99%A8">隐藏滚动指示器</h3>
<p>在滚动视图时，荧幕底部附近有一个滚动指示器。这个指示器默认是显示的。如果你想要隐藏它，你可以将 <code>ScrollView</code> 的代码变更如下： </p>
<pre><code class="lang-swift"><span class="hljs-type">ScrollView</span>(.horizontal, showsIndicators: <span class="hljs-built_in">false</span>)
</code></pre>
<p>通过指定 <code>showIndicators</code> 为 <code>false</code>，iOS 将不再显示该指示器。</p>
<h3 id="%E7%BE%A4%E7%B5%84%E8%A6%96%E5%9C%96%E5%85%A7%E5%AE%B9">群组视图内容</h3>
<p>如果你再次阅读一下代码，所有的  <code>CardViews</code> 是以 <code>.frame</code> 修饰器来限制其宽度为 300 点，是否有其他简化的方式，并移除重复的代码呢？SwiftUI 框架提供了开发者群组视图（<code>Group</code> view）的功能，可以将相关内容群组起来。更重要的是，你可以将修饰器加至群组，所有嵌入群组内的视图皆能够同步做产生效果。 </p>
<p>举例而言，你可以将 <code>HStack</code> 内的程式重写如下来完成同样的结果：</p>
<pre><code class="lang-swift"><span class="hljs-type">HStack</span> {
    <span class="hljs-type">Group</span> {
        <span class="hljs-type">CardView</span>(image: <span class="hljs-string">&quot;swiftui-button&quot;</span>, category: <span class="hljs-string">&quot;SwiftUI&quot;</span>, heading: <span class="hljs-string">&quot;Drawing a Border with Rounded Corners&quot;</span>, author: <span class="hljs-string">&quot;Simon Ng&quot;</span>)
        <span class="hljs-type">CardView</span>(image: <span class="hljs-string">&quot;macos-programming&quot;</span>, category: <span class="hljs-string">&quot;macOS&quot;</span>, heading: <span class="hljs-string">&quot;Building a Simple Editing App&quot;</span>, author: <span class="hljs-string">&quot;Gabriel Theodoropoulos&quot;</span>)
        <span class="hljs-type">CardView</span>(image: <span class="hljs-string">&quot;flutter-app&quot;</span>, category: <span class="hljs-string">&quot;Flutter&quot;</span>, heading: <span class="hljs-string">&quot;Building a Complex Layout with Flutter&quot;</span>, author: <span class="hljs-string">&quot;Lawrence Tan&quot;</span>)
        <span class="hljs-type">CardView</span>(image: <span class="hljs-string">&quot;natural-language-api&quot;</span>, category: <span class="hljs-string">&quot;iOS&quot;</span>, heading: <span class="hljs-string">&quot;What&apos;s New in Natural Language API&quot;</span>, author: <span class="hljs-string">&quot;Sai Kambampati&quot;</span>)
    }
    .frame(width: <span class="hljs-number">300</span>)
}
</code></pre>
<h3 id="%E8%87%AA%E5%8B%95%E8%AA%BF%E6%95%B4%E6%96%87%E5%AD%97">自动调整文字</h3>
<p>如图 5.15 所示，第一张卡片的标题被截断了，该如何修正这个问题呢？ SwiftUI 中可以使用 <code>.minimumScaleFactor</code> 修饰器来自动缩小文字。你可以切换至 CardView.swift，并于 <code>Text（标题）</code>加上以下这个修饰器：</p>
<pre><code class="lang-swift">.minimumScaleFactor(<span class="hljs-number">0.5</span>)
</code></pre>
<p>SwiftUI 会自动缩小文字来相容可用的空间。这边的值设定了视图所允许的最小缩放量。以这个例子来看，SwiftUI 能够将文字尽量缩至原来大小的 50%。</p>
<h3 id="%E4%BD%9C%E6%A5%AD-2">作业 #2</h3>
<p>最后有一个作业，修改目前的代码，并如图 5.16 所示来重新排列。请注意，当使用者滚动卡片视图时，用户应该可以看到标题和日期。</p>
<figure id="fig5.16"><img src="images/scrollview/swiftui-scrollview-16.png" alt="图 5.16.　视图靠上对齐"><figcaption>图 5.16.　视图靠上对齐</figcaption></figure>
<p>在本章所准备的示例档中，有完整的项目与作业解答可以下载： </p>
<ul>
<li>示例项目 (<a href="https://www.appcoda.com/resources/swiftui4/SwiftUIScrollView.zip" target="_blank">https://www.appcoda.com/resources/swiftui4/SwiftUIScrollView.zip</a>)</li>
</ul>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./swiftui-stacks.html" class="navigation navigation-prev " aria-label="Previous page: 以堆叠布局使用者介面"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./swiftui-buttons.html" class="navigation navigation-next " aria-label="Next page: SwiftUI 按钮与渐层"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":"white","family":"serif","size":3},"image-captions":{"caption":"_CAPTION_","variable_name":"_pictures"}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
